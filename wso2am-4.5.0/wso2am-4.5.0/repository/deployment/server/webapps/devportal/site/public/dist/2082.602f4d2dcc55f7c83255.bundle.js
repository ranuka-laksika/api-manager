"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[2082],{32082:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var o=n(96540),a=n(11848),r=n(34339),i=n(5556),s=n.n(i),l=n(99020),c=n(33551),d=n(6442),p=n(58065),u=n(32997),m=n(92728),b=n(84712),A=n(78874),f=n(53036),g=n(51989),h=n(85877),y=n(1710),E=n(16576),x=n(48719),C=n(72048),S=n(41750),v=n(84798),w=n(1043),$=n(53215),P=n(44675),I=n(41340),k=n(1403),T=n(94877),R=n(11154);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){let{field:n,value:o}=t;return O(O({},e),{},{[n]:o})}const L=function(e){const t=(0,d.A)(),n=e.topic.type.toLowerCase(),a="publish"===n||"subscribe"===n?n.substr(0,3):n,r=(0,P.A)(),i=r.custom.resourceChipColors[a],{generateGenericWHSubscriptionCurl:s,topic:u,endPoint:m}=e,A={topic:u.name,secret:null,lease:5e4,mode:"subscribe",callback:null},[f,g]=(0,o.useState)(s(A,m)),[h,U]=(0,o.useState)(!1),[O,H]=(0,o.useReducer)(z,A);(0,o.useEffect)((()=>{g(s(A,m))}),[m]);const L=e=>{H({field:e.target.name,value:e.target.value})};return o.createElement(y.A,{sx:{marginBottom:"10px",border:`1px solid ${i}`}},o.createElement(x.A,{expandIcon:o.createElement(C.A,null),"aria-controls":"wh-subscription-content",id:"wh-subscription-header",sx:{backgroundColor:T.A.hexToRGBA(i,.1),maxHeight:"40px",borderColor:"#80bdff","&$expanded":{maxHeight:"40px"}}},o.createElement(l.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0},o.createElement(l.Ay,{item:!0,md:11},o.createElement(R.A,{invisible:"false",color:"error",variant:"dot"},o.createElement(v.A,{disableFocusRipple:!0,variant:"outlined",size:"small",sx:{backgroundColor:"#ffffff",borderColor:i,color:i,width:r.spacing(2)}},a.toUpperCase())),o.createElement(c.A,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},u.name)))),o.createElement(E.A,null,o.createElement(l.Ay,{container:!0,direction:"column",wrap:"nowrap",spacing:3},o.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},o.createElement(I.A,{"aria-label":"mode",name:"mode",value:O.mode,row:!0,onChange:L},o.createElement(k.A,{value:"subscribe",control:o.createElement($.A,null),label:t.formatMessage({defaultMessage:"Subscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Subscribe"})}),o.createElement(k.A,{value:"unsubscribe",control:o.createElement($.A,null),label:t.formatMessage({defaultMessage:"Unsubscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Unsubscribe"})}))),o.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},o.createElement(w.A,{variant:"outlined",size:"small",sx:{width:"50%"},name:"callback",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Callback URL",id:"Apis.Details.AsyncApiConsole.Webhooks.callback"}),error:h,required:!0,placeholder:"www.webhook.site",onChange:L,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}})),"subscribe"===O.mode&&o.createElement(o.Fragment,null,o.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},o.createElement(w.A,{variant:"outlined",size:"small",sx:{width:"50%"},name:"secret",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Secret",id:"Apis.Details.AsyncApiConsole.Webhooks.secret"}),placeholder:"secret",onChange:L,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}})),o.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},o.createElement(w.A,{variant:"outlined",size:"small",sx:{width:"50%"},name:"lease",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Lease Seconds",id:"Apis.Details.AsyncApiConsole.Webhooks.lease"}),onChange:L,defaultValue:5e4,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}}))),o.createElement(l.Ay,{item:!0,xs:12},o.createElement(w.A,{variant:"filled",label:t.formatMessage({defaultMessage:"cURL",id:"Apis.Details.AsyncApiConsole.Webhooks.curl"}),defaultValue:"",value:f,fullWidth:!0,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.custom.curlGenerator.backgroundColor,color:r.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600}}},InputLabelProps:{shrink:!0}})))),o.createElement(S.A,{style:{paddingRight:"18px"}},o.createElement(v.A,{size:"small",onClick:()=>{!O.callback||O.callback.length<1?U(!0):(U(!1),g(s(O,m)))}},o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),o.createElement(v.A,{size:"small",onClick:()=>{navigator.clipboard.writeText(f).then((()=>b.A.info(t.formatMessage({defaultMessage:"cURL copied",id:"Apis.Details.AsyncApiConsole.Webhooks.curl.copied"}))))}},o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"}))))};function D(e){const t=e.topic.type.toLowerCase(),n="publish"===t||"subscribe"===t?t.substr(0,3):t,a=(0,P.A)(),r=a.custom.resourceChipColors[n],{generateGenericSubscriptionCommand:i,topic:s,expandable:d,endPoint:u}=e,[m,A]=(0,o.useState)(i(s,u));return(0,o.useEffect)((()=>{A(i(s,u))}),[u]),o.createElement(y.A,{sx:{marginBottom:"10px",border:`1px solid ${r}`},style:{pointerEvents:d?"auto":"none"}},o.createElement(x.A,{expandIcon:d&&o.createElement(C.A,null),"aria-controls":"generic-subscription-content",id:"generic-subscription-header",sx:{backgroundColor:T.A.hexToRGBA(r,.1),maxHeight:"40px","&$expanded":{maxHeight:"40px"}}},o.createElement(l.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0},o.createElement(l.Ay,{item:!0,md:11},o.createElement(R.A,{invisible:"false",color:"error",variant:"dot"},o.createElement(v.A,{disableFocusRipple:!0,variant:"outlined",size:"small",sx:{backgroundColor:"#ffffff",borderColor:r,color:r,width:a.spacing(2)}},n.toUpperCase())),o.createElement(c.A,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},s.name)))),o.createElement(E.A,null,o.createElement(l.Ay,{container:!0,direction:"column",wrap:"nowrap"},o.createElement(w.A,{variant:"filled",label:"cURL",defaultValue:"",value:m,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:a.spacing(1)}},input:{borderRadius:4,backgroundColor:a.custom.curlGenerator.backgroundColor,color:a.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:a.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600}}},InputLabelProps:{shrink:!0}}))),o.createElement(S.A,{style:{paddingRight:"18px"}},o.createElement(v.A,{size:"small",onClick:()=>{A(i(s,u))}},o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),o.createElement(v.A,{size:"small",onClick:()=>{navigator.clipboard.writeText(m).then((()=>b.A.info(o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Copied",defaultMessage:"cURL copied"}))))}},o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"}))))}var B=n(43267),N=n(17681),M=n(45359),G=n(53846),W=n(62861);const j="AsyncApiUI",_={endpointSelectorRoot:`${j}-endpointSelectorRoot`,selectList:`${j}-selectList`},X=(0,a.Ay)("div")({[`& .${_.endpointSelectorRoot}`]:{paddingBottom:"20px"},[`& .${_.selectList}`]:{minWidth:"130px",maxWidth:"100%",border:"2px solid #41444e",fontFamily:"sans-serif",fontSize:"14px",fontWeight:700,padding:"2px 2px 2px 10px",borderRadius:"4px",color:"#3b4151"}});function Y(e){const t=(0,d.A)(),{authorizationHeader:n,URLs:a,securitySchemeType:r,accessTokenProvider:i}=e,{api:s}=(0,o.useContext)(f._),l=s.advertiseInfo&&s.advertiseInfo.advertised;let c;c=a&&(a.http||a.https),s.type===W.A.API_TYPES.WS&&(c=a&&(a.ws||a.wss));let p=!0;a&&(a.http||a.https)||(p=!1);const[u,m]=(0,o.useState)(""),[A,y]=(0,o.useState)(c);(0,o.useEffect)((()=>{let e=a&&a.http;s.type===W.A.API_TYPES.WS&&(e=a&&a.ws),y(e)}),[a,s.type]),(0,o.useEffect)((()=>{const e=s.id;(new g.A).getAllTopics(e).then((e=>{m(e.body)})).catch((e=>{console.log(e),b.A.error(t.formatMessage({id:"Apis.Details.AsyncApiConsole.AsyncApiUI.topics.get.error",defaultMessage:"Error while retrieving topics for the API."}))}))}),[]);function E(){let e;return e="apikey"===n?i():"BASIC"===r?"Basic "+i():l?i():"Bearer "+i(),e}function x(e,t){const{topic:o,callback:a,secret:r,mode:i,lease:c}=e,d=E(),p=t||A;if("subscribe"===i){let e=`curl -X POST '${p}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(o)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${i}'`;return r&&(e+=` -d 'hub.secret=${r}'`),c&&(e+=` -d 'hub.lease_seconds=${c}'`),s.advertiseInfo&&s.advertiseInfo.adveritsed&&""!==n?e+=` -H '${n}: ${d}'`:e+=` -H 'Authorization: ${d}'`,e}{let e=`curl -X POST '${p}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(o)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${i}' -H 'Authorization: ${d}'`;return l&&""!==n&&(e=`curl -X POST '${p}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(o)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${i}' -H '${n}: ${d}'`),e}}function C(e){let t=e.name;return"/"===t.charAt(0)&&(t=t.substring(1)),t}function S(e,t){const o=E(),a=t||A;if(e.name.includes("*")){let e=`wscat -c '${a}' -H '${"API-KEY"===r?"apikey":"Authorization"}: ${o}'`;return l&&""!==n&&(e=`wscat -c '${a}' -H '${n}: ${o}'`),e}{let t=`wscat -c '${a}/${C(e)}' -H '${"API-KEY"===r?"apikey":"Authorization"}: ${o}'`;return l&&""!==n&&(t=`wscat -c '${a}/${C(e)}' -H '${n}: ${o}'`),t}}function v(e,t){const o=E(),a=t||A;if(e.name.includes("*")){let e=`curl -X GET '${a}' -H 'Authorization: ${o}'`;return l&&""!==n&&(e=`curl -X GET '${a}' -H '${n}: ${o}'`),e}{let t=`curl -X GET '${a}/${C(e)}' -H 'Authorization: ${o}'`;return l&&""!==n&&(t=`curl -X GET '${a}/${C(e)}' -H '${n}: ${o}'`),t}}function w(e,t){const o=E(),a=t||A;if(e.name.includes("*")){let e=`curl -X GET '${a}' -H 'Authorization: ${o}'`;return""!==n&&(e=`curl -X GET '${a}' -H '${n}: ${o}'`),e}{let t=`curl -X GET '${a}/${C(e)}' -H 'Authorization: ${o}'`;return""!==n&&(t=`curl -X GET '${a}/${C(e)}' -H '${n}: ${o}'`),t}}return u?o.createElement(X,null,o.createElement(M.A,{variant:"standard",className:_.endpointSelectorRoot},o.createElement(B.A,null,"Servers"),o.createElement(G.A,{variant:"standard",className:_.selectList,id:"api-endpoint-select",value:A,displayEmpty:!0,onChange:e=>{y(e.target.value)}},Object.entries(a).map((e=>{let[t,n]=e;if(n)return o.createElement(N.A,{value:n,key:t},n)})))),s.type===W.A.API_TYPES.WEBSUB&&u.list.map(((e,t)=>o.createElement(L,{topic:e,generateGenericWHSubscriptionCurl:x,endPoint:A,expandable:!0}))),s.type===W.A.API_TYPES.SSE&&u.list.map(((e,t)=>o.createElement(D,{generateGenericSubscriptionCommand:v,endPoint:A,topic:e,expandable:!0}))),s.type===W.A.API_TYPES.WS&&u.list.map(((e,t)=>o.createElement(D,{generateGenericSubscriptionCommand:S,endPoint:A,topic:e,expandable:!0}))),s.type===W.A.API_TYPES.ASYNC&&u.list.map(((e,t)=>o.createElement(D,{generateGenericSubscriptionCommand:w,endPoint:A,topic:e,expandable:p})))):o.createElement(h.A,null)}const K="AsyncApiConsole",F={paper:`${K}-paper`,grid:`${K}-grid`,userNotificationPaper:`${K}-userNotificationPaper`,titleSub:`${K}-titleSub`},q=(0,a.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${F.paper}`]:{margin:t.spacing(1),padding:t.spacing(1)},[`& .${F.grid}`]:{marginTop:t.spacing(4),marginBottom:t.spacing(4),paddingRight:t.spacing(2),justifyContent:"center"},[`& .${F.userNotificationPaper}`]:{padding:t.spacing(2)},[`& .${F.titleSub}`]:{marginLeft:t.spacing(2),paddingTop:t.spacing(2),paddingBottom:t.spacing(2)}}}));function V(){(0,d.A)();const{api:e}=(0,o.useContext)(f._),[t,n]=(0,o.useState)("OAUTH"),[a,i]=(0,o.useState)(),[s,b]=(0,o.useState)(),[y,E]=(0,o.useState)(),[x,C]=(0,o.useState)(null),[S,v]=(0,o.useState)(null),[w,$]=(0,o.useState)(null),[P,I]=(0,o.useState)(""),[k,T]=(0,o.useState)(""),[R,U]=(0,o.useState)("PRODUCTION"),[O,H]=(0,o.useState)([]),[z,L]=(0,o.useState)(""),[D,B]=(0,o.useState)(""),N=e.endpointURLs,[M,G]=(0,o.useState)(N.length>0?N[0].URLs:[]),[W,j]=(0,o.useState)(!1),[_,X]=(0,o.useState)("Authorization"),[K,V]=(0,o.useState)(""),[J,Q]=(0,o.useState)("PRODUCTION"),Z=u.A.getUser();function ee(){let e;O.get(R)&&({accessToken:e}=O.get(R).token),"PRODUCTION"===R?b(e):E(e)}if((0,o.useEffect)((()=>{if(a&&N.length>0){const e=N.find((e=>e.environmentName===a));e&&e.URLs&&G(e.URLs)}}),[a,N]),(0,o.useEffect)((()=>{const t=e.id;(new g.A).getAPIById(t).then((e=>{const t=e.obj;if(t.endpointURLs){const e=t.endpointURLs.map((e=>({name:e.environmentName,displayName:e.environmentDisplayName})));C(e)}else C([]);if(t.labels){const e=t.labels.map((e=>e.name));$(e)}else $([]);if(t.scopes){const e=t.scopes.map((e=>e.name));v(e)}else v([])})).catch((e=>{v([]),C([]),$([]);const{status:t}=e;404===t&&j(!0)}))}),[]),null===e||!S||!w||!x)return o.createElement(h.A,null);if(W)return o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.Api.Unavailable",defaultMessage:"API Not Found !"});let te=!1,ne=e.authorizationHeader?e.authorizationHeader:"Authorization";e&&e.securityScheme&&(te=e.securityScheme.includes("api_key"),te&&"API-KEY"===t&&(ne="apikey")),e.advertiseInfo&&e.advertiseInfo.advertised&&(ne=_);const oe=e=>{const t={http:null,https:null,ws:null,wss:null},[n]=e.split("://");return t[n]=e,t};return o.createElement(q,null,o.createElement(c.A,{variant:"h4",className:F.titleSub},o.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.title",defaultMessage:"Try Out"})),o.createElement(r.A,{className:F.paper},o.createElement(l.Ay,{container:!0,className:F.grid},!Z&&(!e.advertiseInfo||!e.advertiseInfo.advertised)&&o.createElement(l.Ay,{item:!0,md:6},o.createElement(r.A,{className:F.userNotificationPaper},o.createElement(c.A,{variant:"h5",component:"h3"},o.createElement(m.A,null,"info")," ",o.createElement(p.A,{id:"notice",defaultMessage:"Notice"})),o.createElement(c.A,{component:"p"},o.createElement(p.A,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),o.createElement(l.Ay,{container:!0,className:F.grid},o.createElement(A.A,{setSecurityScheme:n,securitySchemeType:t,setSelectedEnvironment:i,selectedEnvironment:a,productionAccessToken:s,setProductionAccessToken:b,sandboxAccessToken:y,setSandboxAccessToken:E,environments:x,scopes:S,labels:w,setUsername:I,setPassword:T,username:P,password:k,setSelectedKeyType:function(t,n){!n||e.advertiseInfo&&e.advertiseInfo.advertised?U(t):U(t,ee)},selectedKeyType:R,setKeys:H,setURLs:G,setProductionApiKey:B,setSandboxApiKey:L,productionApiKey:D,sandboxApiKey:z,environmentObject:N,setAdvAuthHeader:X,setAdvAuthHeaderValue:V,advAuthHeader:_,advAuthHeaderValue:K,setSelectedEndpoint:Q,selectedEndpoint:J,api:e,URLs:null}))),o.createElement(r.A,{className:F.paper},o.createElement(Y,{authorizationHeader:ne,URLs:(()=>{if(e.advertiseInfo&&e.advertiseInfo.advertised){if("PRODUCTION"===J)return oe(e.advertiseInfo.apiExternalProductionEndpoint);if("SANDBOX"===J)return oe(e.advertiseInfo.apiExternalSandboxEndpoint)}return M})(),securitySchemeType:t,accessTokenProvider:function(){return e.advertiseInfo&&e.advertiseInfo.advertised?K:"BASIC"===t?btoa(P+":"+k):"API-KEY"===t?"PRODUCTION"===R?D:z:"PRODUCTION"===R?s:y}})))}V.propTypes={classes:s().shape({paper:s().string.isRequired,titleSub:s().string.isRequired,root:s().string.isRequired}).isRequired}}}]);
//# sourceMappingURL=2082.602f4d2dcc55f7c83255.bundle.js.map