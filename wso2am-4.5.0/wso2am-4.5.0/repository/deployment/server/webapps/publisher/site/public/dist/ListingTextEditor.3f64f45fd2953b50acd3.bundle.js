"use strict";(this.webpackChunk_wso2apim_publisher=this.webpackChunk_wso2apim_publisher||[]).push([[1523],{821054:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(296540),r=n(311848),o=n(956347),i=n(38798),c=n(958065),l=n(605556),s=n.n(l),u=n(74010),p=n(758031),d=n(19455),m=n(233551),f=n(148875),y=n(392728),h=n(334339),v=n(635143),A=n(443754),b=n(329987),g=n.n(b),E=n(447340),C=n.n(E),S=n(804686),T=n(614739),w=n(395381),N=n(784712),x=n(729747),D=n(490431),O=n(573357),I=n(342479);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,i,c=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(c.push(a.value),c.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k.apply(null,arguments)}function R(e,t,n){return(t=function(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _="TextEditor",q={appBar:"".concat(_,"-appBar"),flex:"".concat(_,"-flex"),popupHeader:"".concat(_,"-popupHeader"),splitWrapper:"".concat(_,"-splitWrapper"),docName:"".concat(_,"-docName"),button:"".concat(_,"-button")},U=(0,r.Ay)(p.A)(R(R(R(R(R(R({},"& .".concat(q.appBar),{position:"relative"}),"& .".concat(q.flex),{flex:1}),"& .".concat(q.popupHeader),{display:"flex",flexDirection:"row",alignItems:"center"}),"& .".concat(q.splitWrapper),{padding:0,height:"calc(100vh - 64px)",overflow:"hidden"}),"& .".concat(q.docName),{alignItems:"center",display:"flex"}),"& .".concat(q.button),{height:30,marginLeft:30}));function B(e){return a.createElement(f.A,k({direction:"up"},e))}function L(e){var t=this,n=e.intl,r=e.showAtOnce,o=e.history,i=e.docId,l=e.docName,s=(0,a.useContext)(x.Ay),p=s.api,f=s.isAPIProduct,b=P((0,a.useState)(r),2),E=b[0],M=b[1],j=P((0,a.useState)(v.EditorState.createEmpty()),2),k=j[0],R=j[1],_=P((0,a.useState)(!1),2),L=_[0],W=_[1],H=function(){if(E||(f?new T.A:p.apiType===w.A.CONSTS.MCP?w.A:new S.A).getInlineContentOfDocument(p.id,i).then(function(e){var t=C()(e.text);if(t){var n=v.ContentState.createFromBlockArray(t.contentBlocks),a=v.EditorState.createWithContent(n);R(a)}}).catch(function(e){404===e.status&&t.setState({apiNotFound:!0})}),E&&r){var e=(0,I.DT)(p.apiType)+p.id+"/documents";o.push(e)}M(!E)};return a.createElement("div",null,a.createElement(u.A,{onClick:H,disabled:(0,D.E)(p.apiType&&"MCP"===p.apiType.toUpperCase()?["apim:mcp_server_create","apim:mcp_server_manage","apim:document_manage"]:["apim:api_create","apim:api_publish"],p)||p.isRevision,"aria-label":"Edit Content of ".concat(l)},a.createElement(y.A,null,"description"),a.createElement(c.A,{id:"Apis.Details.Documents.TextEditor.edit.content",defaultMessage:[{type:0,value:"Edit Content"}]})),a.createElement(U,{fullScreen:!0,open:E,onClose:H,TransitionComponent:B},a.createElement(h.A,{square:!0,className:q.popupHeader},a.createElement(d.A,{color:"inherit",onClick:H,"aria-label":"Close",size:"large"},a.createElement(y.A,null,"close")),a.createElement(m.A,{variant:"h4",className:q.docName},a.createElement(c.A,{id:"Apis.Details.Documents.TextEditor.edit.content.of",defaultMessage:[{type:0,value:"Edit Content of"}]})," ",'"',l,'"'),a.createElement(u.A,{className:q.button,variant:"contained",disabled:L,color:"primary",onClick:function(){var e;e=f?new T.A:p.apiType===w.A.CONSTS.MCP?w.A:new S.A,W(!0);var t=g()((0,v.convertToRaw)(k.getCurrentContent()));e.addInlineContentToDocument(p.id,i,"INLINE",t).then(function(e){N.A.info("".concat(e.obj.name," ").concat(n.formatMessage({id:"Apis.Details.Documents.TextEditor.update.success.message",defaultMessage:[{type:0,value:"updated successfully."}]}))),H(),W(!1)}).catch(function(e){N.A.error("".concat(e," ").concat(n.formatMessage({id:"Apis.Details.Documents.TextEditor.update.error.message",defaultMessage:[{type:0,value:"update failed."}]}))),W(!1)})}},a.createElement(c.A,{id:"Apis.Details.Documents.TextEditor.update.content.button",defaultMessage:[{type:0,value:"Update Content"}]}),L&&a.createElement(O.A,{size:24})),a.createElement(u.A,{className:q.button,onClick:H},a.createElement(c.A,{id:"Apis.Details.Documents.TextEditor.cancel.button",defaultMessage:[{type:0,value:"Cancel"}]}))),a.createElement("div",{className:q.splitWrapper},a.createElement(A.Editor,{editorState:k,wrapperClassName:"draftjs-wrapper",editorClassName:"draftjs-editor",editorStyle:{height:"calc(100vh - 128px)",overflowY:"auto"},onEditorStateChange:function(e){R(e)},toolbar:{embedded:{embedCallback:function(e){try{var t=new URL(e);if(["http:","https:"].includes(t.protocol))return e}catch(e){}return N.A.error(n.formatMessage({id:"Apis.Details.Documents.TextEditor.edit.content.invalid.url",defaultMessage:[{type:0,value:"Invalid URL. The URL must start with http:// or https://"}]})),null}}}}))))}L.propTypes={classes:s().shape({}).isRequired,docId:s().string.isRequired,intl:s().shape({}).isRequired,showAtOnce:s().bool.isRequired,api:s().shape({id:s().string,apiType:s().oneOf([S.A.CONSTS.API,S.A.CONSTS.APIProduct,w.A.CONSTS.MCP])}).isRequired,docName:s().string.isRequired};const W=(0,i.Ay)((0,o.y)(L))}}]);
//# sourceMappingURL=ListingTextEditor.3f64f45fd2953b50acd3.bundle.js.map