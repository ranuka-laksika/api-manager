/*! For license information please see APICreateRoutes.a752935ce1d7e01455e1.bundle.js.LICENSE.txt */
"use strict";(this.webpackChunk_wso2apim_publisher=this.webpackChunk_wso2apim_publisher||[]).push([[8879],{673390:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ba});var n=r(296540),a=r(311848),i=r(956347),o=r(208843),l=r(449450),c=r(663660),s=r(325996),u=r(431153),p=r(468581),d=r(605556),f=r.n(d),m=r(233551),y=r(553313),v=r(799020),A=r(706442),g=r(958065),b=r(279595),h=r(482997),P=r(847363),C=r(74010),E=r(354625),S=r(784712),I=r(573357),w=r(544675),O=r(301043),M=r(725239),x=r(19455),j=r(392728),D=r(313945),T=r(627967),k=r(17681),V=r(769554),R=r(448805),L=r(445359),W=r(606347),N=r(804686),F=r(395381),U=r(803542);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function B(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){J(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r){return(t=function(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K="DefaultAPIForm",Y={Regular:"wso2/synapse",APK:"wso2/apk",AWS:"AWS",Azure:"Azure"},X={mandatoryStar:"".concat(K,"-mandatoryStar"),helperTextContext:"".concat(K,"-helperTextContext"),endpointValidChip:"".concat(K,"-endpointValidChip"),endpointInvalidChip:"".concat(K,"-endpointInvalidChip"),endpointErrorChip:"".concat(K,"-endpointErrorChip"),iconButton:"".concat(K,"-iconButton"),iconButtonValid:"".concat(K,"-iconButtonValid")},H=(0,a.Ay)(v.Ay)(function(e){var t=e.theme;return J(J(J(J(J(J(J({},"& .".concat(X.mandatoryStar),{color:t.palette.error.main,marginLeft:t.spacing(.1)}),"& .".concat(X.helperTextContext),{"& p":{textOverflow:"ellipsis",width:400,display:"block",whiteSpace:"nowrap",overflow:"hidden"}}),"& .".concat(X.endpointValidChip),{color:"green",border:"1px solid green"}),"& .".concat(X.endpointInvalidChip),{color:"#ffd53a",border:"1px solid #ffd53a"}),"& .".concat(X.endpointErrorChip),{color:"red",border:"1px solid red"}),"& .".concat(X.iconButton),{padding:t.spacing(1)}),"& .".concat(X.iconButtonValid),{padding:t.spacing(1),color:U.A[500]})});function Z(e,t){var r,n=e.context,a=e.version;return r=t?"{channel}/{version}":"{context}/{version}",n&&(r=n,n.indexOf("{version}")<0&&(r=n+"/{version}")),a&&(r=r.replace("{version}",a)),r}function ee(e){var t=e.onChange,r=e.onValidate,a=e.api,i=e.isAPIProduct,o=e.isMCPServer,l=e.multiGateway,c=e.isWebSocket,s=e.children,u=e.appendChildrenBeforeEndpoint,p=e.hideEndpoint,d=e.readOnlyAPIEndpoint,f=e.settings,A=e.mcpServerType,b=(0,w.A)(),h=z((0,n.useState)({}),2),P=h[0],C=h[1],E=z((0,n.useState)(),2),S=E[0],U=E[1],G=z((0,n.useState)(""),2),_=G[0],$=G[1],Q=z((0,n.useState)(!1),2),J=Q[0],K=Q[1],ee=z((0,n.useState)(!1),2),te=ee[0],re=ee[1],ne=function(e){if(!e)return b.custom.gatewayGradients.default;for(var t=e.toLowerCase(),r=b.custom.gatewayGradients,n=0,a=Object.entries(r);n<a.length;n++){var i=z(a[n],2),o=i[0],l=i[1];if("default"!==o&&t.includes(o))return l}return r.default};(0,n.useEffect)(function(){r(Boolean(a.name)&&Boolean(a.version)&&Boolean(a.context)),l&&null!=f&&f.gatewayTypes&&f.gatewayTypes.forEach(function(e){e in Y||(Y[e]=e)})},[]);var ae=function(e){var t=Object.entries(e).length>0&&Object.entries(e).map(function(e){return null==z(e,2)[1]}).reduce(function(e,t){return e&&t});t=t&&Boolean(a.name)&&Boolean(a.version)&&Boolean(a.context),r(t,P),C(e)};function ie(e,t){switch(e){case"name":var r=R.A.apiName.validate(t,{abortEarly:!1}).error;null===r?R.A.apiParameter.validate(e+":"+t).then(function(e){ae(q(q({},P),{},!0===e?{name:{details:[{message:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.name.exists",defaultMessage:[{type:0,value:"Name "},{type:1,value:"value"},{type:0,value:" already exists"}],values:{value:t}})}]}}:{name:r}))}):ae(q(q({},P),{},{name:r}));break;case"context":var a=R.A.apiContext.required().validate(t,{abortEarly:!1}).error,i=t.startsWith("/")?t:"/"+t;if(null===a){var o,l=B(i.split("/"));try{for(l.s();!(o=l.n()).done;){var s=o.value;null!==s&&"{version}"!==s&&(s.includes("{version}")?(a=R.A.apiContextWithoutKeyWords.required().validate(t,{abortEarly:!1}).error,ae(q(q({},P),{},{context:{details:[{message:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.version.exists.as.a.substring.in.path.param",defaultMessage:[{type:1,value:"version"},{type:0,value:" cannot exist as a substring in a path param"}]})}]}}))):(s.includes("{")||s.includes("}"))&&(a=R.A.apiContextWithoutKeyWords.required().validate(t,{abortEarly:!1}).error,ae(q(q({},P),{},{context:{details:[{message:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.curly.braces.cannot.be.in.path.param",defaultMessage:[{type:1,value:"or"},{type:0,value:" cannot exist as a substring in a path param"}]})}]}}))))}}catch(e){l.e(e)}finally{l.f()}var u=0;if(null===a){var p,d=B(i);try{for(d.s();!(p=d.n()).done;){var f=p.value;"("===f?u++:")"===f&&u--,u<0&&ae(q(q({},P),{},{context:{details:[{message:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.unbalanced.parantheses",defaultMessage:[{type:0,value:"Parentheses should be balanced in API context"}]})}]}}))}}catch(e){d.e(e)}finally{d.f()}u>0&&ae(q(q({},P),{},{context:{details:[{message:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.unbalanced.parantheses",defaultMessage:[{type:0,value:"Parentheses should be balanced in API context"}]})}]}}))}null===a&&0===u&&R.A.apiParameter.validate(e+":"+i).then(function(e){ae(q(q({},P),{},!0===e?{context:{details:[{message:c?i+" channel already exists":i+" context already exists"}]}}:{context:a,version:null}))})}else ae(q(q({},P),{},{context:a}));break;case"version":var m=R.A.apiVersion.required().validate(t).error;ae(q(q({},P),{},{version:m}));break;case"endpoint":if(c&&t&&t.length>0){var y=R.A.wsUrl.validate(t).error;ae(q(q({},P),{},{endpointURL:y}))}}}var oe,le,ce,se={product:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.display.name.helper.text.product",defaultMessage:[{type:0,value:"Display name for the API Product"}]}),mcp:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.display.name.helper.text.mcp",defaultMessage:[{type:0,value:"Display name for the MCP Server"}]}),default:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.display.name.helper.text.api",defaultMessage:[{type:0,value:"Display name for the API"}]})}[i?"product":o?"mcp":"default"];return n.createElement(H,{item:!0,md:12},n.createElement("form",{noValidate:!0,autoComplete:"off"},n.createElement(O.A,{autoFocus:!0,fullWidth:!0,id:"api-name",error:Boolean(P.name),label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.name",defaultMessage:[{type:0,value:"Name"}]}),n.createElement("sup",{className:X.mandatoryStar},"*")),helperText:P.name&&P.name.details.map(function(e,t){return n.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)}),value:a.name,name:"name",onChange:t,InputProps:{id:"itest-id-apiname-input",onBlur:function(e){ie("name",e.target.value)}},InputLabelProps:{for:"itest-id-apiname-input"},margin:"normal",variant:"outlined"}),n.createElement(O.A,{fullWidth:!0,id:"api-display-name",label:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.display.name",defaultMessage:[{type:0,value:"Display Name"}]}),helperText:se,value:a.displayName||a.name,name:"displayName",InputLabelProps:{shrink:!(!a.displayName&&!a.name)},onChange:t,margin:"normal",variant:"outlined"}),n.createElement(v.Ay,{container:!0,spacing:2},i||o?n.createElement(n.Fragment,null,n.createElement(v.Ay,{item:!0,md:8,xs:6},n.createElement(O.A,{fullWidth:!0,id:"context",error:Boolean(P.context),label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.product.context",defaultMessage:[{type:0,value:"Context"}]}),n.createElement("sup",{className:X.mandatoryStar},"*")),name:"context",value:a.context,onChange:t,InputProps:{onBlur:function(e){ie("context",e.target.value)}},helperText:P.context&&P.context.details.map(function(e,t){return n.createElement("div",{key:e.message,style:{marginTop:0!==t&&"10px"}},e.message)})||n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.product.actual.context.helper",defaultMessage:[{type:1,value:"type"},{type:0,value:" will be exposed via "},{type:1,value:"actualContext"},{type:0,value:" at the gateway"}],values:{actualContext:Z(a),type:i?"API Product":"MCP Server"}}),margin:"normal",variant:"outlined"})),n.createElement(v.Ay,{item:!0,md:4,xs:6},n.createElement(O.A,{fullWidth:!0,id:"version",error:Boolean(P.version),label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.product.version",defaultMessage:[{type:0,value:"Version"}]}),n.createElement("sup",{className:X.mandatoryStar},"*")),name:"version",value:a.version,onChange:t,InputProps:{id:"itest-id-apiversion-input",onBlur:function(e){ie("version",e.target.value)}},InputLabelProps:{for:"itest-id-apiversion-input"},helperText:P.version&&P.version.message,margin:"normal",variant:"outlined"}))):n.createElement(n.Fragment,null,n.createElement(v.Ay,{item:!0,md:8,xs:6},n.createElement(O.A,{fullWidth:!0,id:"context",error:Boolean(P.context),label:n.createElement(n.Fragment,null,c?n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.channel",defaultMessage:[{type:0,value:"Channel"}]}):n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.context",defaultMessage:[{type:0,value:"Context"}]}),n.createElement("sup",{className:X.mandatoryStar},"*")),name:"context",value:a.context,onChange:t,InputProps:{id:"itest-id-apicontext-input",onBlur:function(e){ie("context",e.target.value)}},InputLabelProps:{for:"itest-id-apicontext-input"},helperText:P.context&&P.context.details.map(function(e,t){return n.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)})||n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.actual.context.helper",defaultMessage:[{type:0,value:"API will be exposed in "},{type:1,value:"actualContext"},{type:0,value:" context at the gateway"}],values:{actualContext:Z(a,c)}}),classes:{root:X.helperTextContext},margin:"normal",variant:"outlined"})),n.createElement(v.Ay,{item:!0,md:4,xs:6},n.createElement(O.A,{fullWidth:!0,id:"version",error:Boolean(P.version),label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.version",defaultMessage:[{type:0,value:"Version"}]}),n.createElement("sup",{className:X.mandatoryStar},"*")),name:"version",value:a.version,onChange:t,InputProps:{id:"itest-id-apiversion-input",onBlur:function(e){ie("version",e.target.value)}},InputLabelProps:{for:"itest-id-apiversion-input"},helperText:P.version&&P.version.message,margin:"normal",variant:"outlined"})))),u&&!!s&&s,!i&&!p&&"EXISTING_API"!==A&&n.createElement(O.A,{fullWidth:!0,id:"itest-id-apiendpoint-input",disabled:null!==d,label:n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.api.endpoint",defaultMessage:[{type:0,value:"Endpoint"}]}),name:"endpoint",value:o&&a.mcpServerUrl?a.mcpServerUrl:a.endpoint,onChange:t,helperText:P.endpointURL&&P.endpointURL.details.map(function(e,t){return n.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)}),error:Boolean(P.endpointURL),margin:"normal",variant:"outlined",InputProps:{onBlur:function(e){ie("endpoint",e.target.value)},endAdornment:n.createElement(M.A,{position:"end"},_&&n.createElement(V.A,{label:_,className:S?X.endpointValidChip:(oe=te,le=X.endpointErrorChip,ce=X.endpointInvalidChip,oe?le:ce),variant:"outlined"}),!c&&n.createElement(x.A,{className:S?X.iconButtonValid:X.iconButton,"aria-label":"TestEndpoint",onClick:function(){return function(e){var t;if(K(!0),o)if("DIRECT_BACKEND"===A)t=F.A.testEndpoint(e,a.id);else{if("SERVER_PROXY"!==A)return void K(!1);t=F.A.validateThirdPartyMCPServerUrl(e)}else t=(new N.A).testEndpoint(e);t.then(function(e){"SERVER_PROXY"===A?e.body.isValid?($("200 OK - Valid MCP Server URL"),re(!1),U(!0)):($(e.body.errorMessage||"Invalid MCP Server URL"),re(!0),U(!1)):(null!==e.body.error?($(e.body.error),re(!0)):($(e.body.statusCode+" "+e.body.statusMessage),re(!1)),e.body.statusCode>=200&&e.body.statusCode<300?(U(!0),re(!1)):U(!1))}).finally(function(){K(!1)})}(a.endpoint)},disabled:J,size:"large"},J?n.createElement(I.A,{size:20}):n.createElement(j.A,null,"check_circle")))}}),l&&l.length>1&&n.createElement(L.A,{fullWidth:!0,margin:"normal",variant:"outlined"},n.createElement(D.A,{id:"gateway-type-select-label"},n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.select.gateway.type",defaultMessage:[{type:0,value:"Gateway type"}]})),n.createElement(T.A,{labelId:"gateway-type-select-label",id:"gateway-type-select",value:a.gatewayType||"",label:"Gateway type",MenuProps:{PaperProps:{style:{maxHeight:300}}},sx:{"& .MuiSelect-select":{paddingTop:"12px",paddingBottom:"12px"},"& .MuiSelect-icon":{right:"18px"}},onChange:function(e){return t({target:{name:"gatewayType",value:e.target.value}})}},l.map(function(e){return n.createElement(k.A,{key:e.value,value:e.value},n.createElement(y.A,{sx:{display:"flex",alignItems:"center",width:"100%"}},n.createElement(y.A,{sx:{width:32,height:32,borderRadius:1.5,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",marginRight:1.5,background:ne(e.name)}},e.name?e.name.charAt(0).toUpperCase():"G"),n.createElement(y.A,{sx:{flex:1}},n.createElement(y.A,{sx:{display:"flex",alignItems:"center"}},n.createElement("span",null,e.name)),n.createElement(m.A,{variant:"body2",color:"textSecondary",component:"div"},e.description))))})),n.createElement(W.A,null,n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.select.gateway.type.helper.text",defaultMessage:[{type:0,value:"Select the gateway type where your API will run."}]}))),!u&&!!s&&s),n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center"},n.createElement(v.Ay,{item:!0},n.createElement(m.A,{variant:"caption",display:"block",gutterBottom:!0},n.createElement("sup",{style:{color:"red"}},"*")," ",n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.mandatory.fields",defaultMessage:[{type:0,value:"Mandatory fields"}]})))))}ee.defaultProps={onValidate:function(){},api:{},isWebSocket:!1,readOnlyAPIEndpoint:null,isMCPServer:!1,mcpServerType:null},ee.propTypes={api:f().shape({}),multiGateway:f().isRequired,isAPIProduct:f().shape({}).isRequired,isMCPServer:f().shape({}),isWebSocket:f().shape({}),onChange:f().func.isRequired,onValidate:f().func,readOnlyAPIEndpoint:f().string,mcpServerType:f().oneOf(["DIRECT_BACKEND","EXISTING_API","SERVER_PROXY"])};var te=r(334339);function re(e){var t=e.title,r=e.children;return n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,sm:!1,md:3}),n.createElement(v.Ay,{item:!0,sm:12,md:6},n.createElement(v.Ay,{container:!0,sx:{pt:2}},n.createElement(v.Ay,{item:!0,md:12,sx:{mb:3}},t),n.createElement(v.Ay,{item:!0,xs:12,md:12},n.createElement(te.A,{elevation:0,sx:{p:5}},r)))))}re.propTypes={title:f().element.isRequired,children:f().arrayOf(f().element).isRequired};var ne=r(511354);function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var oe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=new Set(t);return e.filter(function(e){return n.has(r(e))})},le=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=new Set(t);return e.filter(function(e){return!n.has(r(e))})},ce=function(e,t){var r=new Set(e);return t.forEach(function(e){return r.add(e)}),Array.from(r)},se=function(e,t){var r=new Set(t);return e.filter(function(e){return!r.has(e)})},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return"".concat(e.verb,"-").concat(e.target)},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e},o=ae((0,n.useState)([]),2),l=o[0],c=o[1],s=ae((0,n.useState)(e),2),u=s[0],p=s[1],d=ae((0,n.useState)([]),2),f=d[0],m=d[1];(0,n.useEffect)(function(){var e=f.length>0;t(e);var n=i(f);r({action:"operations",value:n})},[f,t,r,i]);var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=e.map(t);return oe(r,l).length};return{checked:l,availableOperations:u,selectedOperations:f,getCheckedItemsInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=e.map(t);return oe(r,l)},handleToggle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return function(){var r=t(e);l.includes(r)?c(se(l,[r])):c(ce(l,[r]))}},numberOfChecked:y,handleToggleAll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return function(){var r=e.map(t);y(e,t)===e.length?c(se(l,r)):c(ce(l,r))}},handleCheckedObjectsRight:function(){var e=oe(u,l,a);m(f.concat(e)),p(le(u,e.map(a),a)),c(se(l,e.map(a)))},handleCheckedObjectsLeft:function(){var e=oe(f,l,a);p(u.concat(e)),m(le(f,e.map(a),a)),c(se(l,e.map(a)))},updateAvailableOperations:function(e){p(e),m([]),c([])}}},pe=r(149799),de=r(114977),fe=r(853650),me=r(198587),ye=r(58168),ve=r(634164),Ae=r(175659),ge=r(156950),be=r(539770),he=r(225669),Pe=r(332),Ce=r(902778),Ee=r(896852),Se=r(32850),Ie=r(522927),we=r(474848);const Oe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],Me=(0,a.Ay)(Pe.A,{shouldForwardProp:e=>(0,be.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,ye.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ie.A.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,ge.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Ie.A.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,ge.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Ie.A.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,ge.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,ge.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Ie.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ie.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})),xe=n.forwardRef(function(e,t){const r=(0,he.b)({props:e,name:"MuiListItemButton"}),{alignItems:a="center",autoFocus:i=!1,component:o="div",children:l,dense:c=!1,disableGutters:s=!1,divider:u=!1,focusVisibleClassName:p,selected:d=!1,className:f}=r,m=(0,me.A)(r,Oe),y=n.useContext(Se.A),v=n.useMemo(()=>({dense:c||y.dense||!1,alignItems:a,disableGutters:s}),[a,y.dense,c,s]),A=n.useRef(null);(0,Ce.A)(()=>{i&&A.current&&A.current.focus()},[i]);const g=(0,ye.A)({},r,{alignItems:a,dense:v.dense,disableGutters:s,divider:u,selected:d}),b=(e=>{const{alignItems:t,classes:r,dense:n,disabled:a,disableGutters:i,divider:o,selected:l}=e,c={root:["root",n&&"dense",!i&&"gutters",o&&"divider",a&&"disabled","flex-start"===t&&"alignItemsFlexStart",l&&"selected"]},s=(0,Ae.A)(c,Ie.Y,r);return(0,ye.A)({},r,s)})(g),h=(0,Ee.A)(A,t);return(0,we.jsx)(Se.A.Provider,{value:v,children:(0,we.jsx)(Me,(0,ye.A)({ref:h,href:m.href||m.to,component:(m.href||m.to)&&"div"===o?"button":o,focusVisibleClassName:(0,ve.A)(b.focusVisible,p),ownerState:g,className:(0,ve.A)(b.root,f)},m,{classes:b,children:l}))})}),je=xe;var De=r(482241),Te=r(857873),ke=r(271238),Ve=r(971543),Re=r(223138);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}var We={methodView:"".concat("TransferList","-methodView")},Ne=(0,a.Ay)("div")(function(e){var t,r,n,a=e.theme;return t={},r="& .".concat(We.methodView),n={marginLeft:a.spacing(1),marginRight:a.spacing(1)},(r=function(e){var t=function(e){if("object"!=Le(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Le(t)?t:t+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}),Fe=function(e){var t=e.availableOperations,r=e.selectedOperations,a=e.checked,i=e.onToggle,o=e.onToggleAll,l=e.onMoveRight,c=e.onMoveLeft,s=e.getCheckedItemsInList,u=e.numberOfChecked,p=e.keyExtractor,d=void 0===p?function(e){return"".concat(e.verb,"-").concat(e.target)}:p,f=e.leftTitle,m=void 0===f?"Available Operations":f,y=e.rightTitle,A=void 0===y?"Selected Operations":y,g=e.renderItem,b=void 0===g?function(e){return n.createElement("div",null,n.createElement(Re.A,{method:e.verb,className:We.methodView}),n.createElement("span",null,e.target))}:g,h=function(e,t){var r=s(t,d);return n.createElement(de.A,null,n.createElement(fe.A,{sx:{px:2,py:1},avatar:n.createElement(ke.A,{onClick:o(t,d),checked:u(t,d)===t.length&&0!==t.length,indeterminate:u(t,d)!==t.length&&0!==u(t,d),disabled:0===t.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:"".concat(r.length,"/").concat(t.length," selected")}),n.createElement(Ve.A,null),n.createElement(pe.A,{sx:{width:"100%",height:300,bgcolor:"background.paper",overflow:"auto"},dense:!0,component:"div",role:"list"},t.map(function(e){var t="transfer-list-object-item-".concat(d(e),"-label"),r=a.includes(d(e));return n.createElement(je,{key:d(e),role:"listitem",onClick:i(e,d)},n.createElement(Te.A,null,n.createElement(ke.A,{checked:r,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})),n.createElement(De.A,{id:t,primary:b(e)}))})))};return n.createElement(Ne,null,n.createElement(v.Ay,{container:!0,spacing:2,py:2},n.createElement(v.Ay,{item:!0,xs:5},h(m,t)),n.createElement(v.Ay,{item:!0,xs:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},n.createElement(v.Ay,{container:!0,direction:"column",spacing:1,px:2},n.createElement(v.Ay,{item:!0},n.createElement(C.A,{variant:"contained",size:"small",onClick:l,disabled:0===s(t,d).length,"aria-label":"move selected right",fullWidth:!0},">")),n.createElement(v.Ay,{item:!0},n.createElement(C.A,{variant:"contained",size:"small",onClick:c,disabled:0===s(r,d).length,"aria-label":"move selected left",fullWidth:!0},"<")))),n.createElement(v.Ay,{item:!0,xs:5},h(A,r))))};Fe.propTypes={availableOperations:f().isRequired,selectedOperations:f().isRequired,checked:f().arrayOf(f().string).isRequired,onToggle:f().func.isRequired,onToggleAll:f().func.isRequired,onMoveRight:f().func.isRequired,onMoveLeft:f().func.isRequired,getCheckedItemsInList:f().func.isRequired,numberOfChecked:f().func.isRequired,keyExtractor:f().func,leftTitle:f().string,rightTitle:f().string,renderItem:f().func},Fe.defaultProps={leftTitle:"",rightTitle:"",renderItem:void 0,keyExtractor:function(e){return"".concat(e.verb,"-").concat(e.target)}};const Ue=Fe;var Ge=function(e){var t=e.operations,r=e.onValidate,a=e.inputsDispatcher,i=ue(t||[],r,a),o=i.checked,l=i.availableOperations,c=i.selectedOperations,s=i.getCheckedItemsInList,u=i.handleToggle,p=i.numberOfChecked,d=i.handleToggleAll,f=i.handleCheckedObjectsRight,m=i.handleCheckedObjectsLeft;return n.createElement(Ue,{availableOperations:l,selectedOperations:c,checked:o,onToggle:u,onToggleAll:d,onMoveRight:f,onMoveLeft:m,getCheckedItemsInList:s,numberOfChecked:p})};Ge.propTypes={operations:f().arrayOf(f().shape({id:f().string.isRequired,target:f().string,verb:f().string})),onValidate:f().func.isRequired,inputsDispatcher:f().func.isRequired},Ge.defaultProps={operations:[]};const Be=Ge;function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach(function(t){Je(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Je(e,t,r){return(t=function(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e,t){var r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"displayName":case"version":case"endpoint":case"gatewayType":case"context":case"policies":case"isFormValid":case"operations":return Qe(Qe({},e),{},Je({},r,n));case"inputType":return Qe(Qe({},e),{},Je(Je({},r,n),"inputValue","url"===n?"":null));case"preSetAPI":return Qe(Qe({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context,endpoint:n.endpoints&&n.endpoints[0],operations:n.operations||[]});default:return e}}var Ye=function(e){var t,r=qe((0,n.useState)(0),2),a=r[0],o=r[1],c=qe((0,n.useState)(),2),s=c[0],u=c[1],p=(0,i.zy)(),d=e.history,f=(0,A.A)(),w=e.multiGateway,O=(p.state||{}).multiGateway,M=(0,l.Jy)().data;w||(w=O);var x=qe((0,n.useReducer)(Ke,{type:"MCPCreateOpenAPI",inputType:"url",inputValue:"",formValidity:!1,operations:[],gatewayType:w&&(w.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=w[0])||void 0===t?void 0:t.value)}),2),j=x[0],D=x[1],T=function(e){D({action:"isFormValid",value:e})};return n.createElement(re,{title:n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.heading",defaultMessage:[{type:0,value:"Create MCP Server from API Definition"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.sub.heading",defaultMessage:[{type:0,value:"Create an MCP Server using an OpenAPI definition file or URL"}]})))},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:a},n.createElement(h.A,{key:"MCPServers.Create.MCPServerCreateDefault.wizard.one"},n.createElement(P.A,null,n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.wizard.one",defaultMessage:[{type:0,value:"Provide OpenAPI"}]}))),n.createElement(h.A,{key:"MCPServers.Create.MCPServerCreateDefault.wizard.two"},n.createElement(P.A,null,n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.wizard.two",defaultMessage:[{type:0,value:"Select Operations for Tool Generation"}]}))),n.createElement(h.A,{key:"MCPServers.Create.MCPServerCreateDefault.wizard.three"},n.createElement(P.A,null,n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.wizard.three",defaultMessage:[{type:0,value:"Create MCP Server"}]}))))),n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,xs:12},0===a&&n.createElement(ne.A,{onValidate:T,apiInputs:j,inputsDispatcher:D,isMCPServer:!0}),1===a&&n.createElement(Be,{onValidate:T,inputsDispatcher:D,operations:j.operations}),2===a&&n.createElement(ee,{onValidate:T,onChange:function(e){var t=e.target,r=t.name,n=t.value;D({action:r,value:n})},multiGateway:w,api:j,isAPIProduct:!1,isMCPServer:!0,mcpServerType:"DIRECT_BACKEND",settings:M})),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===a&&n.createElement(E.N_,{to:"/mcp-servers/"},n.createElement(C.A,null,n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),(1===a||2===a)&&n.createElement(C.A,{onClick:function(){return o(function(e){return e-1})}},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.back",defaultMessage:[{type:0,value:"Back"}]}))),n.createElement(v.Ay,{item:!0},(0===a||1===a)&&n.createElement(C.A,{onClick:function(){return o(function(e){return e+1})},variant:"contained",color:"primary",disabled:!j.isFormValid,id:"open-api-create-next-btn"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.next",defaultMessage:[{type:0,value:"Next"}]})),2===a&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!j.isFormValid||s,onClick:function(){u(!0);var e,t=j.name,r=j.displayName,n=j.version,a=j.context,i=j.endpoint,o=j.gatewayType,l=j.policies,c=void 0===l?["Unlimited"]:l,s=j.inputValue,p=j.inputType,m=j.operations,y=void 0===m?[]:m,v={name:t,displayName:r,version:n,context:a,gatewayType:"default"==(e=M&&1===M.gatewayTypes.length&&M.gatewayTypes.includes("Regular")?"wso2/synapse":M&&1===M.gatewayTypes.length&&M.gatewayTypes.includes("APK")?"wso2/apk":"default")?o:e,policies:c,operations:y.map(function(e){return{feature:"TOOL",backendOperationMapping:{backendId:"",backendOperation:{target:e.target,verb:e.verb}}}})};i&&(v.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:i},production_endpoints:{url:i}});var A=new F.A(v);("file"===p?A.createMCPServerUsingOpenAPIFile(s):A.createMCPServerUsingOpenAPIUrl(s)).then(function(e){S.A.info(f.formatMessage({id:"MCPServers.Create.MCPServerCreateDefault.created.success",defaultMessage:[{type:0,value:"MCP Server created successfully"}]})),d.push("/mcp-servers/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(f.formatMessage({id:"MCPServers.Create.MCPServerCreateDefault.created.error",defaultMessage:[{type:0,value:"Something went wrong while creating the MCP Server"}]}))}).finally(function(){return u(!1)})},id:"open-api-create-btn"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateDefault.create",defaultMessage:[{type:0,value:"Create"}]})," ",s&&n.createElement(I.A,{size:24})))))))};Ye.propTypes={history:f().shape({push:f().func}).isRequired,multiGateway:f().string.isRequired};const Xe=Ye;var He=r(530970),Ze=r(686663),et=["verb","target","id"];function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rt.apply(null,arguments)}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach(function(t){pt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function it(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var c=n&&n.prototype instanceof l?n:l,s=Object.create(c.prototype);return ot(s,"_invoke",function(r,n,a){var i,l,c,s=0,u=a||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return i=t,l=0,c=e,d.n=r,o}};function f(r,n){for(l=r,c=n,t=0;!p&&s&&!a&&t<u.length;t++){var a,i=u[t],f=d.p,m=i[2];r>3?(a=m===n)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=r<2&&f<i[1])?(l=0,d.v=n,d.n=i[1]):f<m&&(a=r<3||i[0]>n||n>m)&&(i[4]=r,i[5]=n,d.n=m,l=0))}if(a||r>1)return o;throw p=!0,n}return function(a,u,m){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&f(u,m),l=u,c=m;(t=l<2?e:c)||!p;){i||(l?l<3?(l>1&&(d.n=-1),f(l,c)):d.n=c:d.v=c);try{if(s=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(p=d.n<0)?c:r.call(n,d))!==o)break}catch(t){i=e,l=1,c=t}finally{s=1}}return{value:t,done:p}}}(r,a,i),!0),s}var o={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(ot(t={},n,function(){return this}),t),p=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ot(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=s,ot(p,"constructor",s),ot(s,"constructor",c),c.displayName="GeneratorFunction",ot(s,a,"GeneratorFunction"),ot(p),ot(p,a,"Generator"),ot(p,n,function(){return this}),ot(p,"toString",function(){return"[object Generator]"}),(it=function(){return{w:i,m:d}})()}function ot(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ot=function(e,t,r,n){function i(t,r){ot(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},ot(e,t,r,n)}function lt(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ct(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){lt(i,n,a,o,l,"next",e)}function l(e){lt(i,n,a,o,l,"throw",e)}o(void 0)})}}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ut(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t,r){return(t=function(e){var t=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dt={apiSelectionContainer:"".concat("ExistingAPIToolSelection","-apiSelectionContainer")},ft=(0,a.Ay)("div")(function(e){var t=e.theme;return pt({},"& .".concat(dt.apiSelectionContainer),{marginTop:t.spacing(3),marginBottom:t.spacing(3)})}),mt=function(e){var t=e.onValidate,r=e.inputsDispatcher,a=e.selectedAPI,i=void 0===a?null:a,o=i&&i.id,l=st((0,n.useState)([]),2),c=l[0],s=l[1],u=st((0,n.useState)(!1),2),p=u[0],d=u[1],f=st((0,n.useState)(!1),2),v=f[0],A=f[1],b=st((0,n.useState)(i),2),h=b[0],P=b[1],C=st((0,n.useState)(""),2),E=C[0],w=C[1],M=(0,n.useRef)(null),x=ue([],t,r,function(e){return"".concat(e.verb,"-").concat(e.target)},function(e){return e.map(function(e){return e.verb,e.target,e.id,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,et)})}),j=x.checked,D=x.availableOperations,T=x.selectedOperations,k=x.getCheckedItemsInList,V=x.handleToggle,R=x.numberOfChecked,L=x.handleToggleAll,W=x.handleCheckedObjectsRight,F=x.handleCheckedObjectsLeft,U=x.updateAvailableOperations,G=function(){var e=ct(it().m(function e(){var t,r,n,a,i,o,l,c=arguments;return it().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",d(!0),e.p=1,r="?query=type:http vendor:wso2",t&&t.trim()&&(r+=" name:".concat(t.trim())),(n=Ze.parse(r)).limit=100,n.offset=0,e.n=2,N.A.search(n);case 2:a=e.v,i=JSON.parse(a.data),o=i.list||[],s(o),e.n=4;break;case 3:e.p=3,l=e.v,console.error("Error fetching APIs:",l),S.A.error("Failed to fetch available APIs");case 4:return e.p=4,d(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=ct(it().m(function e(t){var r,n,a;return it().w(function(e){for(;;)switch(e.p=e.n){case 0:return A(!0),e.p=1,e.n=2,N.A.get(t);case 2:r=e.v,n=[],r.operations&&Array.isArray(r.operations)&&r.operations.forEach(function(e){n.push({feature:"TOOL",apiOperationMapping:{apiId:r.id,apiName:r.name,apiVersion:r.version,apiContext:r.context,backendOperation:{target:e.target,verb:e.verb}},verb:e.verb,target:e.target,id:"".concat(e.verb,"-").concat(e.target)})}),U(n),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Error fetching API operations:",a),S.A.error("Failed to fetch API operations");case 4:return e.p=4,A(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),_=(0,n.useRef)(null);return(0,n.useEffect)(function(){return G(),function(){M.current=null,_.current&&clearTimeout(_.current)}},[]),(0,n.useEffect)(function(){if(i&&i.id&&!i.name){var e=function(){var e=ct(it().m(function e(){var t,r;return it().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,N.A.get(i.id);case 1:t=e.v,P(t),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Error fetching selected API:",r),S.A.error("Failed to fetch selected API details");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();e()}else i?P(i):(P(null),M.current=null)},[i]),(0,n.useEffect)(function(){h&&h.id!==M.current?(M.current=h.id,B(h.id)):h||(M.current=null,U([]))},[h]),n.createElement(ft,null,n.createElement(y.A,{className:dt.apiSelectionContainer},n.createElement(He.A,{id:"api-selection-autocomplete",options:c,getOptionLabel:function(e){return"".concat(e.name," (").concat(e.version,")")},value:h,inputValue:E,onInputChange:function(e,t){w(t),_.current&&clearTimeout(_.current),_.current=setTimeout(function(){G(t)},300)},onChange:function(e,t){o||(P(t),U([]),t||(M.current=null))},loading:p,disabled:o,readOnly:o,freeSolo:!1,renderInput:function(e){return n.createElement(O.A,rt({},e,{label:n.createElement(m.A,{variant:"subtitle1",gutterBottom:!0},o?n.createElement(g.A,{id:"MCPServers.Create.Steps.ExistingAPIToolSelection.api.selection.label",defaultMessage:[{type:0,value:"Selected API"}]}):n.createElement(g.A,{id:"MCPServers.Create.Steps.ExistingAPIToolSelection.api.selection.label",defaultMessage:[{type:0,value:"Select an API to create MCP Server from"}]})),variant:"outlined",disabled:o,InputProps:at(at({},e.InputProps),{},{endAdornment:n.createElement(n.Fragment,null,p?n.createElement(I.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},renderOption:function(e,t){return n.createElement(y.A,rt({component:"li"},e),n.createElement(y.A,null,n.createElement(m.A,{variant:"body1"},t.name),n.createElement(m.A,{variant:"caption",color:"text.secondary"},"Version: ",t.version," | Context: ",t.context)))},isOptionEqualToValue:function(e,t){return e.id===t.id}}),v&&n.createElement(y.A,{sx:{display:"flex",justifyContent:"center",mt:2}},n.createElement(I.A,{size:24}),n.createElement(m.A,{variant:"body2",sx:{ml:1}},"Loading operations..."))),null!==h&&n.createElement(Ue,{availableOperations:D,selectedOperations:T,checked:j,onToggle:V,onToggleAll:L,onMoveRight:W,onMoveLeft:F,getCheckedItemsInList:k,numberOfChecked:R}))};mt.propTypes={onValidate:f().func.isRequired,inputsDispatcher:f().func.isRequired,selectedAPI:f().oneOfType([f().shape({id:f().string.isRequired,name:f().string,version:f().string,context:f().string}),f().shape({id:f().string.isRequired})])},mt.defaultProps={selectedAPI:null};const yt=mt;var vt=r(490431);function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach(function(t){Ct(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ct(e,t,r){return(t=function(e){var t=function(e){if("object"!=At(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==At(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Et="MCPServerCreateUsingExistingAPI",St={Paper:"".concat(Et,"-Paper"),saveButton:"".concat(Et,"-saveButton"),titleWrapper:"".concat(Et,"-titleWrapper"),buttonWrapper:"".concat(Et,"-buttonWrapper"),alternativeLabel:"".concat(Et,"-alternativeLabel")},It=(0,a.Ay)("div")(function(e){var t=e.theme;return Ct(Ct(Ct(Ct(Ct({},"& .".concat(St.Paper),{height:"40px"}),"& .".concat(St.saveButton),{padding:"0px 0px 0px 10px"}),"& .".concat(St.titleWrapper),{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:t.spacing(2)}),"& .".concat(St.buttonWrapper),{marginTop:t.spacing(4)}),"& .".concat(St.alternativeLabel),{marginTop:t.spacing(1)})}),wt=function(e){var t=e.history,r=e.location,a=(0,A.A)(),i=ht((0,n.useState)(0),2),o=i[0],c=i[1],s=ht((0,n.useState)(),2),u=s[0],p=s[1],d=ht((0,n.useState)(!1),2),f=d[0],w=d[1],O=ht((0,n.useState)(!1),2),M=O[0],x=O[1],j=ht((0,n.useState)(!1),2),D=j[0],T=j[1],k=ht((0,n.useState)(!1),2),V=k[0],R=k[1],L=ht((0,n.useState)([]),2),W=L[0],U=L[1],G=(0,l.Jy)().data,B=new URLSearchParams(r.search).get("apiId"),_=(0,n.useMemo)(function(){return B?{id:B}:null},[B]);(0,n.useEffect)(function(){N.A.policies("subscription").then(function(e){var t=e.body.list;0===t.length?S.A.info(a.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter(function(e){return"Unlimited"===e.name}).length>0?U(["Unlimited"]):U([t[0].name])})},[]);var q=n.createElement(It,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.heading",defaultMessage:[{type:0,value:"Create MCP Server from existing API"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.sub.heading",defaultMessage:[{type:0,value:"Create an MCP Server from an existing API by providing a Name, a Context, a Version, Tools, and Business Plans (optional)."}]}))),z=ht((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"type":case"name":case"displayName":case"context":case"version":case"isFormValid":case"operations":return bt(bt({},e),{},Ct({},r,n));default:return e}},{type:"MCPServerCreateUsingExistingAPI",name:"",context:"",version:"",operations:[],isFormValid:!1}),2),$=z[0],Q=z[1],J=function(e){Q({action:"isFormValid",value:e})},K=function(){p(!0);var e=$.name,t=$.context,r=$.version,n=$.displayName,i=$.operations,o=void 0===i?[]:i,l={name:e,displayName:n,context:t,version:r,policies:W,operations:o,transport:["http","https"]};return l.operations=o,new F.A(l).createMCPServerUsingExistingAPI().then(function(e){return S.A.info(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.created.success",defaultMessage:[{type:0,value:"MCP Server created successfully"}]})),e}).catch(function(e){throw e}).finally(function(){return p(!1)})};return n.createElement(re,{title:q},n.createElement(y.A,{sx:{mb:3}},n.createElement(b.A,{alternativeLabel:!0,activeStep:o},[{key:"MCPServers.Create.MCPServerCreateUsingExistingAPI.wizard.one",label:n.createElement(g.A,{variant:"caption",id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.wizard.one",defaultMessage:[{type:0,value:"Select API and Operations for Tool Generation"}]})},{key:"MCPServers.Create.MCPServerCreateUsingExistingAPI.wizard.two",label:n.createElement(g.A,{variant:"caption",id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.wizard.two",defaultMessage:[{type:0,value:"Create MCP Server"}]})}].map(function(e){return n.createElement(h.A,{key:e.key},n.createElement(P.A,{className:St.alternativeLabel},e.label))}))),n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,md:12},0===o&&n.createElement(yt,{onValidate:J,inputsDispatcher:Q,selectedAPI:_}),1===o&&n.createElement(ee,{onValidate:J,onChange:function(e){var t=e.target,r=t.name,n=t.value;Q({action:r,value:n})},api:$,isAPIProduct:!1,isMCPServer:!0,mcpServerType:"EXISTING_API",settings:G})),n.createElement(v.Ay,{item:!0,xs:12,sx:{mt:3}},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===o&&n.createElement(E.N_,{to:"/mcp-servers/"},n.createElement(C.A,null,n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===o&&n.createElement(C.A,{onClick:function(){return c(function(e){return e-1})}},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.back",defaultMessage:[{type:0,value:"Back"}]}))),n.createElement(v.Ay,{item:!0},0===o&&n.createElement(C.A,{onClick:function(){return c(function(e){return e+1})},variant:"contained",color:"primary",disabled:!$.isFormValid,id:"open-api-create-next-btn"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===o&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!$.isFormValid||u||f,onClick:function(){K().then(function(e){t.push("/mcp-servers/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.created.error",defaultMessage:[{type:0,value:"Failed to create MCP Server"}]}))})},id:"open-api-create-next-btn"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.create",defaultMessage:[{type:0,value:"Create"}]}),u&&!f&&n.createElement(I.A,{size:24}))),n.createElement(v.Ay,{item:!0},1===o&&!vt.A.isNotPublisher()&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!$.isFormValid||u||f,onClick:function(){w(!0),K().then(function(e){x(!0),S.A.info(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.created.success",defaultMessage:[{type:0,value:"MCP Server created successfully"}]})),F.A.createRevision(e.id,{description:"Initial Revision"}).then(function(r){x(!1);var n=r.body.id;S.A.info(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.revision.created.success",defaultMessage:[{type:0,value:"MCP Server revision created successfully"}]}));var i=G.environment.map(function(e){return e.name}),o=[],l=function(e){var t=G.environment.find(function(t){return t.name===e&&t.vhosts.length>0});return t&&t.vhosts[0].host};i&&i.length>0&&(i.includes("Default")&&l("Default")?o.push({name:"Default",displayOnDevportal:!0,vhost:l("Default")}):l(i[0])&&o.push({name:i[0],displayOnDevportal:!0,vhost:l(i[0])})),T(!0),F.A.deployRevision(e.id,n,o).then(function(){S.A.info(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.revision.deployed.success",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]})),T(!1),R(!0),F.A.updateLcState(e.id,"Publish").then(function(r){"CREATED"===r.body.workflowStatus?S.A.info(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):S.A.info(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.otherStatus",defaultMessage:[{type:0,value:"MCP Serverstatus updated successfully"}]})),t.push("/mcp-servers/".concat(e.id,"/overview"))})}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the MCP Server Revision"}]})),console.error(e)}).finally(function(){w(!1),R(!1),T(!1),x(!1)})}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the MCP Server Revision"}]})),console.error(e)})}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(a.formatMessage({id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.error.errorMessage.create.mcpServer",defaultMessage:[{type:0,value:"Something went wrong while creating the MCP Server"}]})),console.error(e)}).finally(function(){return p(!1)})},id:"open-api-create-btn"},!V&&!M&&!D&&n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.create.and.publish",defaultMessage:[{type:0,value:"Create & Publish"}]}),(V||M||D)&&n.createElement(I.A,{size:24}),u&&V&&n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.create.status",defaultMessage:[{type:0,value:"Creating MCP Server. . ."}]}),!u&&M&&!D&&n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.create.revision.status",defaultMessage:[{type:0,value:"Creating Revision . . ."}]}),!u&&V&&!M&&!D&&n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.create.publish.status",defaultMessage:[{type:0,value:"Publishing MCP Server. . ."}]}),!u&&V&&!M&&D&&n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateUsingExistingAPI.create.deploy.revision.status",defaultMessage:[{type:0,value:"Deploying Revision . . ."}]})))))))};wt.propTypes={history:f().shape({push:f().func}).isRequired,location:f().shape({search:f().string}).isRequired};const Ot=wt;var Mt=r(894017),xt=r(51249),jt=["verb","target","id"];function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Tt(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var c=n&&n.prototype instanceof l?n:l,s=Object.create(c.prototype);return kt(s,"_invoke",function(r,n,a){var i,l,c,s=0,u=a||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return i=t,l=0,c=e,d.n=r,o}};function f(r,n){for(l=r,c=n,t=0;!p&&s&&!a&&t<u.length;t++){var a,i=u[t],f=d.p,m=i[2];r>3?(a=m===n)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=r<2&&f<i[1])?(l=0,d.v=n,d.n=i[1]):f<m&&(a=r<3||i[0]>n||n>m)&&(i[4]=r,i[5]=n,d.n=m,l=0))}if(a||r>1)return o;throw p=!0,n}return function(a,u,m){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&f(u,m),l=u,c=m;(t=l<2?e:c)||!p;){i||(l?l<3?(l>1&&(d.n=-1),f(l,c)):d.n=c:d.v=c);try{if(s=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(p=d.n<0)?c:r.call(n,d))!==o)break}catch(t){i=e,l=1,c=t}finally{s=1}}return{value:t,done:p}}}(r,a,i),!0),s}var o={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(kt(t={},n,function(){return this}),t),p=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,kt(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=s,kt(p,"constructor",s),kt(s,"constructor",c),c.displayName="GeneratorFunction",kt(s,a,"GeneratorFunction"),kt(p),kt(p,a,"Generator"),kt(p,n,function(){return this}),kt(p,"toString",function(){return"[object Generator]"}),(Tt=function(){return{w:i,m:d}})()}function kt(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}kt=function(e,t,r,n){function i(t,r){kt(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},kt(e,t,r,n)}function Vt(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Rt(e){return function(e){if(Array.isArray(e))return Ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach(function(t){Gt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||Ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){if(e){if("string"==typeof e)return Ut(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ut(e,t):void 0}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Gt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Dt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bt="MCPProxyToolSelection",_t={root:"".concat(Bt,"-root"),methodView:"".concat(Bt,"-methodView")},qt=(0,a.Ay)("div")(function(e){var t=e.theme;return Gt(Gt({},"& .".concat(_t.root),{width:"100%"}),"& .".concat(_t.methodView),{marginLeft:t.spacing(1),marginRight:t.spacing(1)})}),zt=function(e){var t=e.onValidate,r=e.apiInputs,a=e.inputsDispatcher,i=Nt((0,n.useState)(!1),2),o=i[0],l=i[1],c=Nt((0,n.useState)(null),2),s=c[0],u=c[1],p=Nt((0,n.useState)(null),2),d=p[0],f=p[1],m=(0,A.A)(),y=function(e){return e.map(function(e){return e.verb,e.target,e.id,Wt(Wt({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,jt)),{},{backendOperationMapping:{backendId:"",backendOperation:{target:e.target,verb:"TOOL"}}})})},b=Nt((0,n.useState)([]),2),h=b[0],P=b[1],C=Nt((0,n.useState)([]),2),E=C[0],S=C[1],w=Nt((0,n.useState)([]),2),x=w[0],j=w[1],D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return"".concat(e.verb,"-").concat(e.target)};return e.map(t).filter(function(e){return h.includes(e)}).length},T=function(e){S(e),j([]),P([]),0===e.length&&f(null)};(0,n.useEffect)(function(){null!=r&&r.mcpServerUrl&&""!==r.mcpServerUrl.trim()||(u(null),f(null),S([]),j([]),P([]))},[null==r?void 0:r.mcpServerUrl]),(0,n.useEffect)(function(){var e=y(x);a({action:"operations",value:e});var n=(null==r?void 0:r.mcpServerUrl)&&!s&&d,i=x.length>0;t(n&&i)},[null==r?void 0:r.mcpServerUrl,s,d,x,t,a,y]);var k=(0,n.useCallback)(function(){var e,t=(e=Tt().m(function e(t){var r,n,a,i;return Tt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t&&""!==t.trim()){e.n=1;break}return u(null),f(null),T([]),e.a(2);case 1:return l(!0),u(null),e.p=2,e.n=3,F.A.validateThirdPartyMCPServerUrl(t);case 3:r=e.v,(n=r.body).isValid?n.toolInfo&&n.toolInfo.operations?(a=n.toolInfo.operations.map(function(e){return{id:"".concat(e.target),target:e.target,description:e.description,feature:e.feature}}),f(n.toolInfo),T(a)):(f(null),T([])):(u("Invalid MCP Server URL. Please try again."),f(null),T([])),e.n=5;break;case 4:e.p=4,i=e.v,console.error("Error validating MCP Server URL:",i),u("Failed to validate MCP Server URL"),f(null),T([]);case 5:return e.p=5,l(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){Vt(i,n,a,o,l,"next",e)}function l(e){Vt(i,n,a,o,l,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}(),[T]),V=null;return o?V=n.createElement(M.A,{position:"end"},n.createElement(I.A,null)):null===s&&null===d||(V=s?n.createElement(M.A,{position:"end"},n.createElement(xt.A,{fontSize:"large",color:"error"})):n.createElement(M.A,{position:"end",id:"url-validated"},n.createElement(Mt.A,{fontSize:"large",color:"primary"}))),r?n.createElement(qt,null,n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,xs:12},n.createElement(O.A,{autoFocus:!0,id:"mcp-server-url",label:m.formatMessage({id:"MCPServers.Create.MCPProxyToolSelection.url.label",defaultMessage:[{type:0,value:"MCP Server URL"}]}),placeholder:m.formatMessage({id:"MCPServers.Create.MCPProxyToolSelection.url.placeholder",defaultMessage:[{type:0,value:"Enter MCP Server URL"}]}),fullWidth:!0,margin:"normal",variant:"outlined",value:(null==r?void 0:r.mcpServerUrl)||"",onChange:function(e){var t=e.target.value;a({action:"mcpServerUrl",value:t}),s&&u(null),(d||E.length>0||x.length>0)&&(f(null),S([]),j([]),P([]))},InputLabelProps:{shrink:!0},InputProps:{onBlur:function(e){var t=e.target.value;k(t)},endAdornment:V},helperText:s||n.createElement(g.A,{id:"MCPServers.Create.MCPProxyToolSelection.url.helper.text",defaultMessage:[{type:0,value:"Click away to validate the URL"}]}),error:!!s,"data-testid":"mcp-server-url-input"}))),d&&(E.length>0||x.length>0)&&n.createElement(Ue,{availableOperations:E,selectedOperations:x,checked:h,onToggle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return"".concat(e.verb,"-").concat(e.target)};return function(){var r=t(e);h.includes(r)?P(function(e){return e.filter(function(e){return e!==r})}):P(function(e){return[].concat(Rt(e),[r])})}},onToggleAll:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return"".concat(e.verb,"-").concat(e.target)};return function(){var r=e.map(t);D(e,t)===e.length?P(function(e){return e.filter(function(e){return!r.includes(e)})}):P(function(e){return Rt(new Set([].concat(Rt(e),Rt(r))))})}},onMoveRight:function(){var e=E.filter(function(e){return h.includes("".concat(e.verb,"-").concat(e.target))});j(function(t){return[].concat(Rt(t),Rt(e))}),S(function(e){return e.filter(function(e){return!h.includes("".concat(e.verb,"-").concat(e.target))})}),P(function(t){return t.filter(function(t){return!e.some(function(e){return"".concat(e.verb,"-").concat(e.target)===t})})})},onMoveLeft:function(){var e=x.filter(function(e){return h.includes("".concat(e.verb,"-").concat(e.target))});S(function(t){return[].concat(Rt(t),Rt(e))}),j(function(e){return e.filter(function(e){return!h.includes("".concat(e.verb,"-").concat(e.target))})}),P(function(t){return t.filter(function(t){return!e.some(function(e){return"".concat(e.verb,"-").concat(e.target)===t})})})},getCheckedItemsInList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return"".concat(e.verb,"-").concat(e.target)};return e.map(t).filter(function(e){return h.includes(e)})},numberOfChecked:D,leftTitle:"Available Tools",rightTitle:"Selected Tools",renderItem:function(e){return n.createElement("div",null,n.createElement(Re.A,{method:"TOOL",className:_t.methodView}),n.createElement("span",null,e.target))},keyExtractor:function(e){return"".concat(e.verb,"-").concat(e.target)}})):(console.warn("MCPProxyToolSelection: apiInputs is undefined"),null)};zt.propTypes={onValidate:f().func.isRequired,apiInputs:f().shape({inputValue:f().string,endpointUrl:f().string,operations:f().arrayOf(f().shape({name:f().string,description:f().string,parameters:f().arrayOf(f().shape({name:f().string}))}))}).isRequired,inputsDispatcher:f().func.isRequired};const $t=zt;function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach(function(t){Ht(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ht(e,t,r){return(t=function(e){var t=function(e){if("object"!=Qt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zt="MCPServerCreateProxy",er={Paper:"".concat(Zt,"-Paper"),saveButton:"".concat(Zt,"-saveButton"),titleWrapper:"".concat(Zt,"-titleWrapper"),buttonWrapper:"".concat(Zt,"-buttonWrapper"),alternativeLabel:"".concat(Zt,"-alternativeLabel")},tr=(0,a.Ay)("div")(function(e){var t=e.theme;return Ht(Ht(Ht(Ht(Ht({},"& .".concat(er.Paper),{height:"40px"}),"& .".concat(er.saveButton),{padding:"0px 0px 0px 10px"}),"& .".concat(er.titleWrapper),{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:t.spacing(2)}),"& .".concat(er.buttonWrapper),{marginTop:t.spacing(4)}),"& .".concat(er.alternativeLabel),{marginTop:t.spacing(1)})}),rr=function(e){var t=e.history,r=(0,A.A)(),a=Yt((0,n.useState)(0),2),i=a[0],o=a[1],c=Yt((0,n.useState)(),2),s=c[0],u=c[1],p=(0,l.Jy)().data,d=n.createElement(tr,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateProxy.heading",defaultMessage:[{type:0,value:"Create MCP Server using MCP Server URL"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateProxy.sub.heading",defaultMessage:[{type:0,value:"Create an MCP Server by providing MCP Server URL"}]}))),f=Yt((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"type":case"name":case"displayName":case"context":case"version":case"mcpServerUrl":case"isFormValid":case"operations":return Kt(Kt({},e),{},Ht({},r,n));default:return e}},{type:"MCPServerCreateProxy",name:"",context:"",version:"",operations:[],isFormValid:!1,mcpServerUrl:""}),2),w=f[0],O=f[1],M=function(e){O({action:"isFormValid",value:e})};return n.createElement(re,{title:d,isCreating:s},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:i},[{key:"MCPServers.Create.MCPServerCreateProxy.wizard.one",label:n.createElement(g.A,{variant:"caption",id:"MCPServers.Create.MCPServerCreateProxy.wizard.one",defaultMessage:[{type:0,value:"Provide MCP Server URL"}]})},{key:"MCPServers.Create.MCPServerCreateProxy.wizard.two",label:n.createElement(g.A,{variant:"caption",id:"MCPServers.Create.MCPServerCreateProxy.wizard.two",defaultMessage:[{type:0,value:"Create MCP Server"}]})}].map(function(e){return n.createElement(h.A,{key:e.key},n.createElement(P.A,{className:er.alternativeLabel},e.label))}))),n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,md:12},0===i&&n.createElement($t,{onValidate:M,apiInputs:w,inputsDispatcher:O}),1===i&&n.createElement(ee,{onValidate:M,onChange:function(e){var t=e.target,r=t.name,n=t.value;O({action:r,value:n})},api:w,isAPIProduct:!1,isMCPServer:!0,mcpServerType:"SERVER_PROXY",settings:p,readOnlyAPIEndpoint:!0})),n.createElement(v.Ay,{item:!0,xs:12,sx:{mt:3}},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===i&&n.createElement(E.N_,{to:"/mcp-servers/"},n.createElement(C.A,null,n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateProxy.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===i&&n.createElement(C.A,{onClick:function(){return o(function(e){return e-1})}},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateProxy.back",defaultMessage:[{type:0,value:"Back"}]}))),n.createElement(v.Ay,{item:!0},0===i&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!w.isFormValid,onClick:function(){return o(function(e){return e+1})}},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateProxy.next",defaultMessage:[{type:0,value:"Next"}]})),1===i&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!w.isFormValid||s,onClick:function(){u(!0);var e,n=w.name,a=w.displayName,i=w.version,o=w.context,l=w.mcpServerUrl,c=w.gatewayType,s=w.policies,d=void 0===s?["Unlimited"]:s,f=w.operations,m=void 0===f?[]:f,y={name:n,displayName:a,version:i,context:o,gatewayType:"default"==(e=p&&1===p.gatewayTypes.length&&p.gatewayTypes.includes("Regular")?"wso2/synapse":p&&1===p.gatewayTypes.length&&p.gatewayTypes.includes("APK")?"wso2/apk":"default")?c:e,policies:d,operations:m};l&&(y.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:l},production_endpoints:{url:l}}),new F.A(y).createMCPServerUsingMCPServerURL(l).then(function(e){S.A.info(r.formatMessage({id:"MCPServers.Create.MCPServerCreateProxy.created.success",defaultMessage:[{type:0,value:"MCP Server created successfully"}]})),t.push("/mcp-servers/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"MCPServers.Create.MCPServerCreateProxy.created.error",defaultMessage:[{type:0,value:"Something went wrong while creating the MCP Server"}]}))}).finally(function(){return u(!1)})}},n.createElement(g.A,{id:"MCPServers.Create.MCPServerCreateProxy.create",defaultMessage:[{type:0,value:"Create"}]})," ",s&&n.createElement(I.A,{size:24})))))))};rr.propTypes={history:f().shape({push:f().func}).isRequired};const nr=rr;var ar=r(38798),ir=r(121070),or=r(487458),lr=r(614739),cr=r(685877),sr=r(449719);function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function pr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=vr(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach(function(t){mr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mr(e,t,r){return(t=function(e){var t=function(e){if("object"!=ur(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ur(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||vr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){if(e){if("string"==typeof e)return Ar(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,t):void 0}}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gr(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,i){var c=n&&n.prototype instanceof l?n:l,s=Object.create(c.prototype);return br(s,"_invoke",function(r,n,a){var i,l,c,s=0,u=a||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return i=t,l=0,c=e,d.n=r,o}};function f(r,n){for(l=r,c=n,t=0;!p&&s&&!a&&t<u.length;t++){var a,i=u[t],f=d.p,m=i[2];r>3?(a=m===n)&&(c=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=r<2&&f<i[1])?(l=0,d.v=n,d.n=i[1]):f<m&&(a=r<3||i[0]>n||n>m)&&(i[4]=r,i[5]=n,d.n=m,l=0))}if(a||r>1)return o;throw p=!0,n}return function(a,u,m){if(s>1)throw TypeError("Generator is already running");for(p&&1===u&&f(u,m),l=u,c=m;(t=l<2?e:c)||!p;){i||(l?l<3?(l>1&&(d.n=-1),f(l,c)):d.n=c:d.v=c);try{if(s=2,i){if(l||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=i.return)&&t.call(i),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);i=e}else if((t=(p=d.n<0)?c:r.call(n,d))!==o)break}catch(t){i=e,l=1,c=t}finally{s=1}}return{value:t,done:p}}}(r,a,i),!0),s}var o={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(br(t={},n,function(){return this}),t),p=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,br(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=s,br(p,"constructor",s),br(s,"constructor",c),c.displayName="GeneratorFunction",br(s,a,"GeneratorFunction"),br(p),br(p,a,"Generator"),br(p,n,function(){return this}),br(p,"toString",function(){return"[object Generator]"}),(gr=function(){return{w:i,m:d}})()}function br(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}br=function(e,t,r,n){function i(t,r){br(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},br(e,t,r,n)}function hr(e,t,r,n,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Pr(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){hr(i,n,a,o,l,"next",e)}function l(e){hr(i,n,a,o,l,"throw",e)}o(void 0)})}}var Cr={Regular:"wso2/synapse",APK:"wso2/apk",AWS:"AWS",Azure:"Azure"},Er=function(){var e=Pr(gr().m(function e(){var t,r;return gr().w(function(e){for(;;)switch(e.n){case 0:return t=N.A.policies("subscription"),e.n=1,t;case 1:return r=e.v,e.a(2,r.body.list)}},e)}));return function(){return e.apply(this,arguments)}}();function Sr(e){var t,r=e.isWebSocket,a=e.isAPIProduct,i=e.history,o=e.intl,c=e.multiGateway,s=(0,l.Jy)(),u=s.data,p=s.isLoading,d=s.error,f=yr((0,n.useState)(!1),2),A=f[0],b=f[1],h=yr((0,n.useState)(null),2),P=h[0],w=h[1],O=yr((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"name":case"displayName":case"version":case"endpoint":case"context":case"gatewayType":case"isFormValid":return fr(fr({},e),{},mr({},r,n));default:return e}},{formValidity:!1,gatewayType:c&&(c.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=c[0])||void 0===t?void 0:t.value)}),2),M=O[0],x=O[1];(0,n.useEffect)(function(){d&&w(d.message)},[d]),(0,n.useEffect)(function(){if(null!=u&&(u.gatewayTypes&&u.gatewayTypes.forEach(function(e){e in Cr||(Cr[e]=e)}),u.gatewayTypes&&u.gatewayTypes.includes("Regular"))){var e,t=pr(u.environment);try{for(t.s();!(e=t.n()).done;)if("Regular"===e.value.gatewayType){b(!0);break}}catch(e){t.e(e)}finally{t.f()}}},[p]);var j=yr((0,n.useState)(),2),D=j[0],T=j[1],k=yr((0,n.useState)(!1),2),V=k[0],R=k[1],L=yr((0,n.useState)(!1),2),W=L[0],F=L[1],U=yr((0,n.useState)(!1),2),G=U[0],B=U[1],_=yr((0,n.useState)(!1),2),q=_[0],z=_[1],$=yr((0,n.useState)(!1),2),Q=$[0],J=$[1],K=M.endpoint,Y=!(M.name&&M.version&&M.context)||D||V;function X(){return H.apply(this,arguments)}function H(){return H=Pr(gr().m(function e(){var t,n,l,c,s,u,p,d,f,m,y,v;return gr().w(function(e){for(;;)switch(e.n){case 0:return T(!0),t=M.name,n=M.version,l=M.context,c=M.endpoint,s=M.gatewayType,u=M.displayName,e.n=1,Er();case 1:return 0===(f=e.v).length?S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):d=f.filter(function(e){return"Unlimited"===e.name}).length>0?["Unlimited"]:[f[0].name],m={name:t,displayName:u,version:n,context:l,gatewayType:s,policies:d},c&&(m.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:c},production_endpoints:{url:c}}),r&&(m.type="WS"),a?(y=new lr.A(m),p=y.saveProduct(m).then(function(e){return S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.product.created.success",defaultMessage:[{type:0,value:"API Product created successfully"}]})),i.push("/api-products/".concat(e.id,"/overview")),e}).catch(function(e){if(console.error(e),e.response)return w(e.response.body),e.response.body.description;var t=o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.product.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API Product"}]});return w(t),t})):(v=new N.A(m),p=v.save(),S.A.loading(p,{loading:"Creating API...",success:o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.created.success",defaultMessage:[{type:0,value:"API created successfully"}]}),error:function(e){if(console.error(e),R(!1),e.response)return w(e.response.body),e.response.body.description;var t=o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]});return w(t),t}})),e.a(2,p.finally(function(){return T(!1)}))}},e)})),H.apply(this,arguments)}(0,n.useEffect)(function(){null!=u&&u.customProperties&&u.customProperties.length>0&&z(!0)},[u]);var Z=n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5",component:"h1"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.api.heading",defaultMessage:[{type:0,value:"Create an API"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Display Name (optional), a Version, a Context and Backend Endpoint (optional)"}]})));return a?Z=n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5",component:"h1"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.apiProduct.heading",defaultMessage:[{type:0,value:"Create an API Product"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.apiProduct.sub.heading",defaultMessage:[{type:0,value:"Create an API Product by providing a Name, a Display Name (optional), a Context, and Business Plans (optional)."}]}))):r&&(Z=n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5",component:"h1"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.webSocket.heading",defaultMessage:[{type:0,value:"Create a WebSocket API"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.webSocket.sub.heading",defaultMessage:[{type:0,value:"Create a WebSocket API by providing a Name, and a Context."}]})))),p?n.createElement(cr.A,null):n.createElement(re,{title:Z},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"center"},P&&n.createElement(v.Ay,{item:!0,xs:11},n.createElement(ir.A,{onClose:function(){return w(null)},disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:P})),n.createElement(v.Ay,{item:!0,xs:12},p&&n.createElement(y.A,{mt:-2},n.createElement(or.A,{"data-testid":"loading-publisher-settings"}))),n.createElement(v.Ay,{item:!0,xs:12,"data-testid":"default-api-form"},n.createElement(ee,{onValidate:function(e){x({action:"isFormValid",value:e})},onChange:function(e){var t=e.target,r=t.name,n=t.value;if(x({action:r,value:n}),"gatewayType"===r){var a=u&&u.environment;if(u&&u.gatewayTypes.length>=2&&Object.values(Cr).includes(n)){var i,o=pr(a);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(Cr[l.gatewayType]===n){b(!0);break}b(!1)}}catch(e){o.e(e)}finally{o.f()}}}},api:M,multiGateway:c,isAPIProduct:a,isWebSocket:r,settings:u})),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},n.createElement(C.A,{id:"itest-create-default-api-button",variant:"contained",color:"primary",disabled:Y||!M.isFormValid,onClick:function(){X().then(function(e){i.push("/apis/".concat(e.id,"/overview"))})}},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.create.btn",defaultMessage:[{type:0,value:"Create"}]})," ",D&&!Q&&n.createElement(I.A,{size:24}))),!q&&!vt.A.isNotPublisher()&&n.createElement(v.Ay,{item:!0},n.createElement(C.A,{id:"itest-id-apicreatedefault-createnpublish",variant:"contained",color:"primary",disabled:!A||G||W||!K||Y||!M.isFormValid,onClick:function(){var e=903300,t=new N.A;J(!0),X().then(function(r){F(!0);var a=t.createRevision(r.id,{description:"Initial Revision"});S.A.loading(a,{success:o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.revision.created.success",defaultMessage:[{type:0,value:"API Revision created successfully"}]}),error:function(t){if(console.error(t),t.response){if(t.response.body.code===e){var r=JSON.parse(t.response.body.description).blockingViolations;return n.createElement(y.A,{sx:{width:"100%"}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation",defaultMessage:[{type:0,value:"Failed to create the API Revision due to governance violations"}]})),n.createElement(y.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},n.createElement(C.A,{onClick:function(){return sr.A.downloadAsJSON(r,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]}))))}return w(t.response.body),t.response.body.description}return w("Something went wrong while creating the API Revision"),o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})},loading:"Creating API revision..."}),a.then(function(a){var l=a.body.id;F(!1);var c=u.environment.map(function(e){return e.name}),s=[],p=u.environment,d=function(e){var t=p.find(function(t){return t.name===e&&t.vhosts.length>0});return t&&t.vhosts[0].host};if(u.gatewayTypes&&1===u.gatewayTypes.length)c&&c.length>0&&(c.includes("Default")&&d("Default")?s.push({name:"Default",displayOnDevportal:!0,vhost:d("Default")}):d(c[0])&&s.push({name:c[0],displayOnDevportal:!0,vhost:d(c[0])}));else{var f=u.environment,v=!1;f.forEach(function(e){var t=Cr[e.gatewayType];!v&&t===M.gatewayType&&d(e.name)&&(s.push({name:e.name,displayOnDevportal:!0,vhost:d(e.name)}),v=!0)})}B(!0);var A=t.deployRevision(r.id,l,s);S.A.loading(A,{loading:"Deploying API...",success:o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.revision.deployed.success",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]}),error:function(t){if(console.error(t),t.response){if(t.response.body.code===e){var r=JSON.parse(t.response.body.description).blockingViolations;return n.createElement(y.A,{sx:{width:"100%"}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation",defaultMessage:[{type:0,value:"Deployment failed due to governance violations"}]})),n.createElement(y.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},n.createElement(C.A,{onClick:function(){return sr.A.downloadAsJSON(r,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]}))))}return w(t.response.body),t.response.body.description}return w("Something went wrong while publishing the API"),o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.publish",defaultMessage:[{type:0,value:"Something went wrong while publishing the API"}]})}}),A.then(function(t){if(B(!1),"CREATED"===t.body[0].status)R(!1),J(!1),i.push("/apis/".concat(r.id,"/overview"));else{R(!0);var a=r.publish();S.A.loading(a,{loading:"Publishing API...",success:function(e){return e.body.workflowStatus===Sr.WORKFLOW_STATUS.CREATED?o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]}):o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.otherStatus",defaultMessage:[{type:0,value:"API updated successfully"}]})},error:function(t){if(t.response.body.code===e){var r=JSON.parse(t.response.body.description).blockingViolations;return n.createElement(y.A,{sx:{width:"100%"}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation",defaultMessage:[{type:0,value:"Failed to publish the API due to governance violations"}]})),n.createElement(y.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},n.createElement(C.A,{onClick:function(){return sr.A.downloadAsJSON(r,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]}))))}return o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.otherStatus",defaultMessage:[{type:0,value:"Error while publishing the API"}]})}}),a.then(function(){return i.push("/apis/".concat(r.id,"/overview"))}).finally(function(){R(!1),J(!1)})}}).finally(function(){B(!1)})}).finally(function(){F(!1)})})}},!V&&!W&&!G&&n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn",defaultMessage:[{type:0,value:"Create & Publish"}]}),(V||W||G)&&n.createElement(I.A,{size:24}),D&&V&&n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.status",defaultMessage:[{type:0,value:"Creating API . . ."}]}),!D&&W&&!G&&n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.revision.status",defaultMessage:[{type:0,value:"Creating Revision . . ."}]}),!D&&V&&!W&&!G&&n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.publishing.status",defaultMessage:[{type:0,value:"Publishing API . . ."}]}),!D&&V&&!W&&G&&n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.deploying.revision.status",defaultMessage:[{type:0,value:"Deploying Revision . . ."}]}))),n.createElement(v.Ay,{item:!0},n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,{variant:"text"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))))))),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(y.A,{mt:4})))}Sr.defaultProps={isWebSocket:!1,isAPIProduct:!1},Sr.WORKFLOW_STATUS={CREATED:"CREATED"},Sr.propTypes={history:f().shape({push:f().func}).isRequired,multiGateway:f().isRequired,isAPIProduct:f().shape({}),isWebSocket:f().shape({}),intl:f().shape({formatMessage:f().func}).isRequired};const Ir=(0,i.y)((0,ar.Ay)(Sr));function wr(e){var t=e.title,r=e.children;return n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,sm:!1,md:2}),n.createElement(v.Ay,{item:!0,sm:12,md:8},n.createElement(v.Ay,{container:!0,sx:{pt:2}},n.createElement(v.Ay,{item:!0,md:12,sx:{mb:3}},t),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(te.A,{elevation:0,sx:{p:5}},r)))))}wr.propTypes={title:f().element.isRequired,children:f().element.isRequired};var Or=r(223679);function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach(function(t){kr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Tr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kr(e,t,r){return(t=function(e){var t=function(e){if("object"!=Mr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vr="APIProductCreateWrapper",Rr={Paper:"".concat(Vr,"-Paper"),saveButton:"".concat(Vr,"-saveButton"),titleWrapper:"".concat(Vr,"-titleWrapper"),buttonWrapper:"".concat(Vr,"-buttonWrapper"),alternativeLabel:"".concat(Vr,"-alternativeLabel")},Lr=(0,a.Ay)("div")(function(e){var t=e.theme;return kr(kr(kr(kr(kr({},"& .".concat(Rr.Paper),{height:"40px"}),"& .".concat(Rr.saveButton),{padding:"0px 0px 0px 10px"}),"& .".concat(Rr.titleWrapper),{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:t.spacing(2)}),"& .".concat(Rr.buttonWrapper),{marginTop:t.spacing(4)}),"& .".concat(Rr.alternativeLabel),{marginTop:t.spacing(1)})});function Wr(e){var t=e.history,r=(0,A.A)(),a=Dr((0,n.useState)(0),2),i=a[0],o=a[1],c=Dr((0,n.useState)([]),2),s=c[0],u=c[1],p=(0,l.Jy)().data,d=Dr((0,n.useState)(!1),2),f=d[0],w=d[1],O=Dr((0,n.useState)(!1),2),M=O[0],x=O[1],j=Dr((0,n.useState)(!1),2),D=j[0],T=j[1],k=Dr((0,n.useState)(!1),2),V=k[0],R=k[1],L=Dr((0,n.useState)([]),2),W=L[0],F=L[1];(0,n.useEffect)(function(){N.A.policies("subscription").then(function(e){var t=e.body.list;0===t.length?S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter(function(e){return"Unlimited"===e.name}).length>0?F(["Unlimited"]):F([t[0].name])})},[]);var U,G=n.createElement(Lr,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.heading",defaultMessage:[{type:0,value:"Create an API Product"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.sub.heading",defaultMessage:[{type:0,value:"Create an API Product by providing a Name, a Context, a Version, Resources, and Business Plans (optional)."}]}))),B=Dr((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"type":case"name":case"displayName":case"context":case"version":case"isFormValid":case"apiResources":return jr(jr({},e),{},kr({},r,n));case"preSetAPI":return jr(jr({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),context:n.context});default:return e}},{type:"ApiProductCreateWrapper",inputValue:"",formValidity:!1}),2),_=B[0],q=B[1],z=Dr((0,n.useState)(),2),$=z[0],Q=z[1],J=[n.createElement(g.A,{variant:"caption",id:"Apis.Create.APIProduct.APIProductCreateWrapper.defineProvide",defaultMessage:[{type:0,value:"Define API Product"}]}),n.createElement(g.A,{variant:"caption",id:"Apis.Create.APIProduct.APIProductCreateWrapper.resources",defaultMessage:[{type:0,value:"Add Resources"}]})],K=function(){Q(!0);var e=_.name,t=_.context,n=_.version,a={name:e,displayName:_.displayName,context:t,version:n,policies:W,apis:s,transport:["http","https"]};return(U=new lr.A(a)).saveProduct(a).then(function(e){return S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.created.success",defaultMessage:[{type:0,value:"API Product created successfully"}]})),e}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.api.product",defaultMessage:[{type:0,value:"Something went wrong while adding the API Product"}]}))}).finally(function(){return Q(!1)}).finally(function(){return Q(!1)})};return n.createElement(n.Fragment,null,n.createElement(wr,{title:G},n.createElement(y.A,{sx:{mb:3}},n.createElement(b.A,{alternativeLabel:!0,activeStep:i},J.map(function(e){return n.createElement(h.A,{key:e},n.createElement(P.A,{className:Rr.alternativeLabel},e))}))),n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,md:12},0===i&&n.createElement(ee,{onValidate:function(e){q({action:"isFormValid",value:e})},onChange:function(e){var t=e.target,r=t.name,n=t.value;q({action:r,value:n})},api:_,isAPIProduct:!0,settings:p}),1===i&&n.createElement(Or.A,{apiResources:s,setApiResources:u,isStateCreate:!0,api:_})),n.createElement(v.Ay,{item:!0,md:12,sx:{mt:3}},n.createElement(v.Ay,{className:1===i&&Rr.saveButton,container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},1===i&&n.createElement(C.A,{onClick:function(){return o(function(e){return e-1})}},n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.back",defaultMessage:[{type:0,value:"Back"}]})),0===i&&n.createElement(E.N_,{to:"/api-products/"},n.createElement(C.A,null,n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.cancel",defaultMessage:[{type:0,value:"Cancel"}]})))),n.createElement(v.Ay,{item:!0},1===i&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!_.isFormValid||$||0===s.length||f,onClick:function(){K().then(function(e){t.push("/api-products/".concat(e.id,"/overview"))})},id:"create-api-product-btn"},n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create",defaultMessage:[{type:0,value:"Create"}]}),$&&!f&&n.createElement(I.A,{size:24})),0===i&&n.createElement(C.A,{onClick:function(){return o(function(e){return e+1})},variant:"contained",color:"primary",disabled:!_.isFormValid,id:"api-product-next-btn"},n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.next",defaultMessage:[{type:0,value:"Next"}]}))),n.createElement(v.Ay,{item:!0},1===i&&!vt.A.isNotPublisher()&&n.createElement(C.A,{variant:"contained",color:"primary",id:"create-and-publish-api-product-btn",disabled:!_.isFormValid||$||0===s.length||D||M||!_.isFormValid,onClick:function(){w(!0),K().then(function(e){x(!0),S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.created.success",defaultMessage:[{type:0,value:"API Product created successfully"}]})),U.createProductRevision(e.id,{description:"Initial Revision"}).then(function(n){x(!1);var a=n.body.id;S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.revision.created.success",defaultMessage:[{type:0,value:"API Revision created successfully"}]}));var i=p.environment.map(function(e){return e.name}),o=[],l=function(e){var t=p.environment.find(function(t){return t.name===e&&t.vhosts.length>0});return t&&t.vhosts[0].host};i&&i.length>0&&(i.includes("Default")&&l("Default")?o.push({name:"Default",displayOnDevportal:!0,vhost:l("Default")}):l(i[0])&&o.push({name:i[0],displayOnDevportal:!0,vhost:l(i[0])})),T(!0),U.deployProductRevision(e.id,a,o).then(function(){S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.revision.deployed.success",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]})),T(!1),R(!0),U.updateLcState(e.id,"Publish").then(function(n){"CREATED"===n.body.workflowStatus?S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):S.A.info(r.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.otherStatus",defaultMessage:[{type:0,value:"API Product status updated successfully"}]})),t.push("/api-products/".concat(e.id,"/overview"))})}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Product Revision"}]})),console.error(e)}).finally(function(){R(!1),w(!1)})}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Product Revision"}]})),console.error(e)})}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.api.product",defaultMessage:[{type:0,value:"Something went wrong while adding the API Product"}]}))}).finally(function(){return Q(!1)})}},!V&&!M&&!D&&n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.and.publish.btn",defaultMessage:[{type:0,value:"Create & Publish"}]}),(V||M||D)&&n.createElement(I.A,{size:24}),$&&V&&n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.status",defaultMessage:[{type:0,value:"Creating API Product. . ."}]}),!$&&M&&!D&&n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.revision.status",defaultMessage:[{type:0,value:"Creating Revision . . ."}]}),!$&&V&&!M&&!D&&n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.publish.status",defaultMessage:[{type:0,value:"Publishing API Product. . ."}]}),!$&&V&&!M&&D&&n.createElement(g.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.deploy.revision.status",defaultMessage:[{type:0,value:"Deploying Revision . . ."}]}))))))))}function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach(function(t){_r(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _r(e,t,r){return(t=function(e){var t=function(e){if("object"!=Nr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qr(e,t){var r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"displayName":case"version":case"endpoint":case"gatewayType":case"context":case"policies":case"isFormValid":return Br(Br({},e),{},_r({},r,n));case"inputType":return Br(Br({},e),{},_r(_r({},r,n),"inputValue","url"===n?"":null));case"preSetAPI":return Br(Br({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context,endpoint:n.endpoints&&n.endpoints[0]});default:return e}}function zr(e){var t,r=Fr((0,n.useState)(0),2),a=r[0],o=r[1],c=(0,i.zy)().state||{},s=c.data,u=c.settings,p=c.multiGateway,d=e.history,f=e.multiGateway,w=(0,l.Jy)().data;w||(w=u),f||(f=p);var O=Fr((0,n.useReducer)(qr,{type:"ApiCreateOpenAPI",inputType:"url",inputValue:"",formValidity:!1,gatewayType:f&&(f.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=f[0])||void 0===t?void 0:t.value)}),2),M=O[0],x=O[1];s&&0===a&&"DesignAssistant"===s.source&&(o(1),x({action:"preSetAPI",value:s}),x({action:"gatewayType",value:s.gatewayType}),x({action:"endpoint",value:s.endpoint}),x({action:"inputType",value:"file"}),x({action:"inputValue",value:s.file}));var j=(0,A.A)();function D(e){x({action:"isFormValid",value:e})}var T=Fr((0,n.useState)(),2),k=T[0],V=T[1];return n.createElement(re,{title:n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.heading",defaultMessage:[{type:0,value:"Create an API using an OpenAPI definition."}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing OpenAPI definition file or URL."}]})))},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:a},n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.wizard.one",defaultMessage:[{type:0,value:"Provide OpenAPI"}]}))),n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,xs:12},0===a&&n.createElement(ne.A,{onValidate:D,apiInputs:M,inputsDispatcher:x}),1===a&&n.createElement(ee,{onValidate:D,onChange:function(e){var t=e.target,r=t.name,n=t.value;x({action:r,value:n})},multiGateway:f,api:M,isAPIProduct:!1,settings:w})),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===a&&n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,null,n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&(s&&"DesignAssistant"===s.source?n.createElement(C.A,{onClick:function(){d.push("/apis")}},n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.designAssistant.back",defaultMessage:[{type:0,value:"Back"}]})):n.createElement(C.A,{onClick:function(){return o(function(e){return e-1})}},n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.back",defaultMessage:[{type:0,value:"Back"}]})))),n.createElement(v.Ay,{item:!0},0===a&&n.createElement(C.A,{onClick:function(){return o(function(e){return e+1})},variant:"contained",color:"primary",disabled:!M.isFormValid,id:"open-api-create-next-btn"},n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===a&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!M.isFormValid||k,onClick:function(){V(!0);var e,t=M.name,r=M.version,n=M.context,a=M.endpoint,i=M.gatewayType,o=M.displayName,l=M.policies,c=void 0===l?["Unlimited"]:l,s=M.inputValue,u=M.inputType,p={name:t,displayName:o,version:r,context:n,gatewayType:"default"==(e=w&&1===w.gatewayTypes.length&&w.gatewayTypes.includes("Regular")?"wso2/synapse":w&&1===w.gatewayTypes.length&&w.gatewayTypes.includes("APK")?"wso2/apk":"default")?i:e,policies:c};a&&(p.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:a},production_endpoints:{url:a}});var f=new N.A(p);("file"===u?f.importOpenAPIByFile(s):f.importOpenAPIByUrl(s)).then(function(e){S.A.info(j.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.success",defaultMessage:[{type:0,value:"API created successfully"}]})),d.push("/apis/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(j.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)}).finally(function(){return V(!1)})},id:"open-api-create-btn"},n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.create",defaultMessage:[{type:0,value:"Create"}]})," ",k&&n.createElement(I.A,{size:24})))))))}Wr.propTypes={history:f().shape({push:f().func}).isRequired},zr.propTypes={history:f().shape({push:f().func}).isRequired,multiGateway:f().string.isRequired};var $r=r(168810),Qr=r(115001),Jr=r(936632);let Kr=!1;const Yr=n.forwardRef(function(e,t){return Kr||(console.warn(["MUI: The Alert component was moved from the lab to the core.","","You should use `import { Alert } from '@mui/material'`","or `import Alert from '@mui/material/Alert'`"].join("\n")),Kr=!0),(0,we.jsx)(Jr.A,(0,ye.A)({ref:t},e))});var Xr=r(954937);let Hr=!1;const Zr=n.forwardRef(function(e,t){return Hr||(console.warn(["MUI: The AlertTitle component was moved from the lab to the core.","","You should use `import { AlertTitle } from '@mui/material'`","or `import AlertTitle from '@mui/material/AlertTitle'`"].join("\n")),Hr=!0),(0,we.jsx)(Xr.A,(0,ye.A)({ref:t},e))});var en=r(651555);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach(function(t){an(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function an(e,t,r){return(t=function(e){var t=function(e){if("object"!=tn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ln(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cn(e){var t,r=(0,A.A)(),a=on((0,n.useState)(0),2),i=a[0],o=a[1],c=e.history,s=e.multiGateway,u=on((0,n.useState)([]),2),p=u[0],d=u[1],f=(0,l.Jy)().data;(0,n.useEffect)(function(){N.A.policies("subscription").then(function(e){var t=e.body.list;0===t.length?S.A.info(r.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter(function(e){return"Unlimited"===e.name}).length>0?d(["Unlimited"]):d([t[0].name])})},[]);var w=on((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"displayName":case"version":case"endpoint":case"context":case"isFormValid":return nn(nn({},e),{},an({},r,n));case"inputType":return nn(nn({},e),{},an(an({},r,n),"inputValue","url"===n?"":null));default:return e}},{type:"SOAP",inputType:"url",inputValue:"",formValidity:!1,mode:"create",gatewayType:s&&(s.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=s[0])||void 0===t?void 0:t.value)}),2),O=w[0],M=w[1];function x(e){M({action:"isFormValid",value:e})}var j=on((0,n.useState)(),2),D=j[0],T=j[1];return n.createElement(re,{title:n.createElement(n.Fragment,null,1===i&&"SOAPTOREST"===O.type&&n.createElement(y.A,{mb:2},n.createElement(Yr,{severity:"warning"},n.createElement(Zr,null,n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.deprecated.msg",defaultMessage:[{type:0,value:"APIM supports only a limited set of capabilities with this feature. If you want to process complex WSDL/XML schema, please refer to the following documentation."}]})),n.createElement(Qr.A,{href:"https://mi.docs.wso2.com/en/latest/develop/creating-artifacts/creating-an-api/",target:"_blank"},"WSO2 Integration Studio Documentation"))),n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.heading",defaultMessage:[{type:0,value:"Expose a SOAP Service as a REST API"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.sub.heading",defaultMessage:[{type:0,value:"Expose an existing SOAP service as a REST API by importing the WSDL of the SOAP service."}]})))},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:i},n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.provide.wsdl",defaultMessage:[{type:0,value:"Provide WSDL"}]}))),n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api",defaultMessage:[{type:0,value:"Create API"}]}))))),n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,md:12},0===i&&n.createElement(en.A,{onValidate:x,apiInputs:O,inputsDispatcher:M}),1===i&&n.createElement(ee,{onValidate:x,onChange:function(e){var t=e.target,r=t.name,n=t.value;M({action:r,value:n})},api:O,isAPIProduct:!1,multiGateway:s,settings:f})),n.createElement(v.Ay,{item:!0,md:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===i&&n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,null,n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===i&&n.createElement(C.A,{onClick:function(){return o(function(e){return e-1})}},n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api.back.btn",defaultMessage:[{type:0,value:"Back"}]}))),n.createElement(v.Ay,{item:!0},0===i&&n.createElement(C.A,{onClick:function(){return o(function(e){return e+1})},variant:"contained",color:"primary",disabled:!O.isFormValid},n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api.next.btn",defaultMessage:[{type:0,value:"Next"}]})),1===i&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!O.isFormValid||D,onClick:function(){T(!0);var e=O.name,t=O.version,n=O.context,a=O.endpoint,i=O.type,o={name:e,displayName:O.displayName,version:t,context:n,policies:p};a&&(o.endpointConfig={endpoint_type:"SOAPTOREST"===i?"address":"http",sandbox_endpoints:{type:"SOAPTOREST"===i?"address":void 0,url:a},production_endpoints:{type:"SOAPTOREST"===i?"address":void 0,url:a}}),("url"===O.inputType?$r.A.importByUrl(O.inputValue,o,O.type):$r.A.importByFileOrArchive(O.inputValue,o,O.type)).then(function(e){S.A.info(r.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.create.success",defaultMessage:[{type:0,value:"API created successfully"}]})),c.push("/apis/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.create.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)}).finally(function(){return T(!1)})}},n.createElement(g.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api.create.btn",defaultMessage:[{type:0,value:"Create"}]})," ",D&&n.createElement(I.A,{size:24})))))))}cn.propTypes={history:f().shape({push:f().func}).isRequired};var sn=r(127601);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach(function(t){fn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fn(e,t,r){return(t=function(e){var t=function(e){if("object"!=un(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==un(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vn(e){var t,r=(0,A.A)(),a=e.multiGateway,o=mn((0,n.useState)(0),2),c=o[0],s=o[1],u=(0,i.zy)().state||{},p=u.data,d=u.settings,f=u.multiGateway,w=(0,i.W6)(),O=mn((0,n.useState)([]),2),M=O[0],x=O[1],j=(0,l.Jy)().data;j||(j=d),a||(a=f),(0,n.useEffect)(function(){N.A.policies("subscription").then(function(e){var t=e.body.list;0===t.length?S.A.info(r.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter(function(e){return"Unlimited"===e.name}).length>0?x(["Unlimited"]):x([t[0].name])})},[]);var D=mn((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"displayName":case"version":case"gatewayType":case"endpoint":case"context":case"isFormValid":case"graphQLInfo":return dn(dn({},e),{},fn({},r,n));case"inputType":return dn(dn({},e),{},fn(fn({},r,n),"inputValue","url"===n||"endpoint"===n?"":null));case"preSetAPI":return dn(dn({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context});default:return e}},{type:"ApiCreateGraphQL",inputType:"file",inputValue:"",formValidity:!1,gatewayType:a&&(a.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=a[0])||void 0===t?void 0:t.value)}),2),T=D[0],k=D[1];function V(e){k({action:"isFormValid",value:e})}p&&0===c&&"DesignAssistant"===p.source&&(s(1),k({action:"preSetAPI",value:p}),k({action:"gatewayType",value:p.gatewayType}),k({action:"graphQLInfo",value:p.graphQLInfo}),k({action:"endpoint",value:p.endpoint}),k({action:"inputType",value:"file"}),k({action:"inputValue",value:p.file}));var R=mn((0,n.useState)(),2),L=R[0],W=R[1];return n.createElement(re,{title:n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.heading",defaultMessage:[{type:0,value:"Create a GraphQL API"}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.sub.heading",defaultMessage:[{type:0,value:"Create a GraphQL API by importing a SDL definition using a file, SDL hosted URL, or by using a GraphQL endpoint."}]})))},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:c},n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.one",defaultMessage:[{type:0,value:"Provide GraphQL"}]}))),n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,md:12},0===c&&n.createElement(sn.A,{onValidate:V,apiInputs:T,inputsDispatcher:k}),1===c&&n.createElement(ee,{onValidate:V,onChange:function(e){var t=e.target,r=t.name,n=t.value;k({action:r,value:n})},multiGateway:a,api:T,isAPIProduct:!1,readOnlyAPIEndpoint:"endpoint"===T.inputType?T.endpoint:null,settings:j})),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===c&&n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,null,n.createElement(g.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===c&&(p&&"DesignAssistant"===p.source?n.createElement(C.A,{onClick:function(){w.push("/apis")}},n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.designAssistant.back",defaultMessage:[{type:0,value:"Back"}]})):n.createElement(C.A,{onClick:function(){return s(function(e){return e-1})}},n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.back",defaultMessage:[{type:0,value:"Back"}]})))),n.createElement(v.Ay,{item:!0},0===c&&n.createElement(C.A,{onClick:function(){return s(function(e){return e+1})},variant:"contained",color:"primary",disabled:!T.isFormValid,"data-testid":"create-graphql-next-btn"},n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.next",defaultMessage:[{type:0,value:"Next"}]})),1===c&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!T.isFormValid||L,onClick:function(){W(!0);var e=T.name,t=T.displayName,n=T.version,a=T.context,i=T.endpoint,o=T.gatewayType,l=T.implementationType,c=T.inputType,s=T.inputValue,u=T.graphQLInfo.operations,p={name:e,displayName:t,version:n,context:a,gatewayType:o,policies:M,operations:u};i&&(p.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:i},production_endpoints:{url:i}});var d=new N.A(p),f={additionalProperties:JSON.stringify(p),implementationType:l};"file"===c?f.file=s:"url"!==c&&"endpoint"!==c||(f.schema=T.graphQLInfo.graphQLSchema.schemaDefinition),d.importGraphQL(f).then(function(t){var n=t.obj.id;S.A.info(r.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.created.success",defaultMessage:[{type:1,value:"name"},{type:0,value:" API created successfully"}]},{name:e})),w.push("/apis/".concat(n,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(r.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)}).finally(function(){return W(!1)})},"data-testid":"itest-create-graphql-api-button"},n.createElement(g.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.create",defaultMessage:[{type:0,value:"Create"}]})," ",L&&n.createElement(I.A,{size:24})))))))}vn.propTypes={multiGateway:f().shape({content:f().string}).isRequired};const An=function(e){var t=e.multiGateway;return n.createElement(Ir,{multiGateway:t,isWebSocket:!0})};function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(r),!0).forEach(function(t){En(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function En(e,t,r){return(t=function(e){var t=function(e){if("object"!=gn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sn={mandatoryStar:"".concat("APICreateStreamingAPI","-mandatoryStar")},In=(0,a.Ay)(re)(function(e){var t=e.theme;return En({},"& .".concat(Sn.mandatoryStar),{color:t.palette.error.main,marginLeft:t.spacing(.1)})}),wn=function(e){var t,r=e.history,a=e.multiGateway,o=(0,A.A)(),c=(0,l.Jy)(),s=c.data,u=c.isLoading,p=c.error,d=Pn((0,n.useState)(null),2),f=d[0],b=d[1];(0,n.useEffect)(function(){p&&b(p.message)},[p]);var h=Pn((0,n.useState)(),2),P=h[0],w=h[1],M=Pn((0,n.useState)(!1),2),x=M[0],j=M[1],D=Pn((0,n.useState)(!1),2),T=D[0],V=D[1],R=Pn((0,n.useState)(!1),2),L=R[0],W=R[1],F=Pn((0,n.useState)(!1),2),U=F[0],G=F[1],B=Pn((0,n.useState)([]),2),_=B[0],q=B[1],z=(0,i.g)().apiType;z&&(z=z.toUpperCase());var $="WEBSUB"===z,Q="WS"===z,J="SSE"===z,K=903300;(0,n.useEffect)(function(){N.A.asyncAPIPolicies().then(function(e){var t=e.body.list;0===t.length?S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):$&&t.filter(function(e){return"AsyncWHUnlimited"===e.policyName}).length>0?q(["AsyncWHUnlimited"]):!$&&t.filter(function(e){return"AsyncUnlimited"===e.policyName}).length>0?q(["AsyncUnlimited"]):q([t[0].policyName])})},[]);var Y={WebSocket:"WS",SSE:"SSE",WebSub:"WEBSUB"},X=Pn((0,n.useState)(!z||z===Y.WebSub),2),H=X[0],Z=X[1],te=Pn((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"name":case"displayName":case"version":case"context":case"endpoint":case"policies":case"isFormValid":return hn(hn({},e),{},En({},r,n));case"protocol":return Z(Y[n]===Y.WebSub),hn(hn({},e),{},En({},r,Y[n]));default:return e}},{formValidity:!1,gatewayType:a&&(a.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=a[0])||void 0===t?void 0:t.value)}),2),re=te[0],ne=te[1],ae=re.name&&re.context&&re.version&&!P,ie=!Q&&!J||re.endpoint;function oe(e){var t=e.target,r=t.name,n=t.value;ne({action:r,value:n})}function le(){w(!0);var e=re.name,t=re.version,r=re.context,n=re.endpoint,a=re.protocol,i={name:e,displayName:re.displayName,version:t,context:r,endpoint:n,type:z||a.toUpperCase(),policies:_},l="http";return(z&&"WS"===z.toUpperCase()||a&&"WS"===a.toUpperCase())&&(l="ws"),n&&(i.endpointConfig={endpoint_type:l,sandbox_endpoints:{url:n},production_endpoints:{url:n}}),new N.A(i).saveStreamingAPI().then(function(e){return S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.success",defaultMessage:[{type:0,value:"API created successfully"}]})),e}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e),j(!1)}).finally(function(){w(!1)}).finally(function(){return w(!1)})}var ce=n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.api.heading",defaultMessage:[{type:0,value:"Create a Streaming API"}]})),n.createElement(m.A,{variant:"caption"},$?n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.websub.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version and a Context"}]}):n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version, a Context and the Endpoint"}]})));return n.createElement(In,{title:ce},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"center"},f&&n.createElement(v.Ay,{item:!0,xs:11},n.createElement(ir.A,{onClose:function(){return b(null)},disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:f})),n.createElement(v.Ay,{item:!0,xs:12},u&&n.createElement(y.A,{mt:-2},n.createElement(I.A,{"data-testid":"loading-publisher-settings"}))),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(ee,{onValidate:function(e){ne({action:"isFormValid",value:e})},onChange:oe,api:re,endpointPlaceholderText:"Streaming Provider",appendChildrenBeforeEndpoint:!0,hideEndpoint:H,multiGateway:a,isWebSocket:z&&z===Y.WebSocket||re.protocol===Y.WebSocket,settings:s},n.createElement(O.A,{fullWidth:!0,select:!0,label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.streaming.Components.SelectPolicies.business.plans",defaultMessage:[{type:0,value:"Protocol"}]}),n.createElement("sup",{className:Sn.mandatoryStar},"*")),value:z?{WS:"WebSocket",SSE:"SSE",WEBSUB:"WebSub"}[z]:re.protocol,disabled:z,name:"protocol",SelectProps:{multiple:!1,renderValue:function(e){return e}},margin:"normal",variant:"outlined",InputProps:{id:"itest-id-apipolicies-input"},onChange:oe},[{displayName:"WebSocket",description:"WebSocket API"},{displayName:"WebSub",description:"WebHook API based on WebSub specification"},{displayName:"SSE",description:"Server-Sent Events"}].map(function(e){return n.createElement(k.A,{dense:!0,disableGutters:!1,value:e.displayName},n.createElement(De.A,{primary:e.displayName,secondary:e.description}))})))),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},n.createElement(C.A,{variant:"contained",color:"primary",disabled:!(ae&&re.isFormValid),onClick:function(){le().then(function(e){r.push("/apis/".concat(e.id,"/overview"))})},"data-testid":"itest-create-streaming-api-button"},n.createElement(g.A,{id:"Apis.Create.streaming.Components.create.btn",defaultMessage:[{type:0,value:"Create"}]})," ",P&&!U&&n.createElement(I.A,{size:24}))),!vt.A.isNotPublisher()&&n.createElement(v.Ay,{item:!0},n.createElement(C.A,{id:"itest-id-apicreatedefault-createnpublish",variant:"contained",color:"primary",disabled:L||T||!ie||!ae||!re.isFormValid,onClick:function(){var e=new N.A;G(!0),le().then(function(t){V(!0),e.createRevision(t.id,{description:"Initial Revision"}).then(function(a){var i=a.body.id;S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.revision.success",defaultMessage:[{type:0,value:"API Revision created successfully"}]})),V(!1);var l=s.environment.map(function(e){return e.name}),c=[],u=function(e){var t=s.environment.find(function(t){return t.name===e&&t.vhosts.length>0});return t&&t.vhosts[0].host};if(s.gatewayTypes&&1===s.gatewayTypes.length)l&&l.length>0&&(l.includes("Default")&&u("Default")?c.push({name:"Default",displayOnDevportal:!0,vhost:u("Default")}):u(l[0])&&c.push({name:l[0],displayOnDevportal:!0,vhost:u(l[0])}));else{var p=s.environment,d=!1;p.forEach(function(e){!d&&"Regular"===e.gatewayType&&u(e.name)&&(c.push({name:e.name,displayOnDevportal:!0,vhost:u(e.name)}),d=!0)})}W(!0),e.deployRevision(t.id,i,c).then(function(){S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.revision.deployed.",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]})),W(!1),j(!0),t.publish().then(function(e){e.body.workflowStatus===wn.WORKFLOW_STATUS.CREATED?S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):S.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.otherStatus",defaultMessage:[{type:0,value:"API updated successfully"}]})),r.push("/apis/".concat(t.id,"/overview"))}).catch(function(e){if(e.response)if(e.response.body.code===K){var t=JSON.parse(e.response.body.description).blockingViolations;S.A.error(n.createElement(y.A,{sx:{width:"100%"}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation",defaultMessage:[{type:0,value:"Failed to publish the API due to governance violations"}]})),n.createElement(y.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},n.createElement(C.A,{onClick:function(){return sr.A.downloadAsJSON(t,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]})))))}else S.A.error(e.response.body.description),b(e.response.body);else S.A.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.publish",defaultMessage:[{type:0,value:"Something went wrong while publishing the API"}]})),b("Something went wrong while publishing the API");console.error(e)}).finally(function(){j(!1),G(!1)})}).catch(function(e){if(e.response)if(e.response.body.code===K){var t=JSON.parse(e.response.body.description).blockingViolations;S.A.error(n.createElement(y.A,{sx:{width:"100%"}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation",defaultMessage:[{type:0,value:"Deployment failed due to governance violations"}]})),n.createElement(y.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},n.createElement(C.A,{onClick:function(){return sr.A.downloadAsJSON(t,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]})))))}else S.A.error(e.response.body.description),b(e.response.body);else S.A.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Revision"}]})),b("Something went wrong while deploying the API Revision");console.error(e)}).finally(function(){W(!1)})}).catch(function(e){if(e.response)if(e.response.body.code===K){var t=JSON.parse(e.response.body.description).blockingViolations;S.A.error(n.createElement(y.A,{sx:{width:"100%"}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation",defaultMessage:[{type:0,value:"Failed to create the API Revision due to governance violations"}]})),n.createElement(y.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},n.createElement(C.A,{onClick:function(){return sr.A.downloadAsJSON(t,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},n.createElement(g.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]})))))}else S.A.error(e.response.body.description),b(e.response.body);else S.A.error(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})),b("Something went wrong while creating the API Revision");console.error(e)}).finally(function(){V(!1)})})}},!x&&!T&&!L&&n.createElement(g.A,{id:"Apis.Create.streaming.Components.create.and.publish.btn",defaultMessage:[{type:0,value:"Create & Publish"}]}),(x||T||L)&&n.createElement(I.A,{size:24}),P&&x&&"Creating API . . .",!P&&T&&!L&&"Creating Revision . . .",!P&&x&&!T&&!L&&"Publishing API . . .",!P&&x&&!T&&L&&"Deploying Revision . . .")),n.createElement(v.Ay,{item:!0},n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,{variant:"text"},n.createElement(g.A,{id:"Apis.Create.Default.APICreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))))))))};wn.WORKFLOW_STATUS={CREATED:"CREATED"};const On=(0,i.y)(wn);var Mn=r(387070),xn=r.n(Mn),jn=r(857555),Dn=r(704531);const Tn=function(e){var t=e.classes,r=e.apiInputs,a=e.inputsDispatcher,i=e.isValidExternalEndpoint,o=e.setValidExternalEndpoint,l=e.validateEndpoint;return n.createElement(n.Fragment,null,n.createElement(O.A,{fullWidth:!0,id:"itest-id-api-external-endpoint-input",label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.externalEndpoint",defaultMessage:[{type:0,value:"External Endpoint"}]}),n.createElement("sup",{className:t.mandatoryStar},"*")),name:"externalEndpoint",value:r.externalEndpoint,onChange:function(e){var t=e.target,r=t.name,n=t.value;o(l(n)),a({action:r,value:n})},helperText:!i&&n.createElement("div",{style:{marginTop:"10px"}},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.externalEndpoint.error",defaultMessage:[{type:0,value:"Invalid Endpoint URL"}]})),error:!i,margin:"normal",variant:"outlined"}),n.createElement(Dn.A,{severity:"warning",className:t.externalEndpointWarning},n.createElement(m.A,{gutterBottom:!0,component:"div",className:t.alertTitle},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.advertiseOnly.warning.title",defaultMessage:[{type:0,value:'"Other" type streaming APIs will be created as third party APIs.'}]})),n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.advertiseOnly.warning",defaultMessage:[{type:0,value:"API Manager only supports the streaming APIs of types WebSocket, SSE and WebSub. Please create one of the supported types if you want to deploy it in the gateway."}]})))};var kn=r(861158);function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(r),!0).forEach(function(t){Fn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Fn(e,t,r){return(t=function(e){var t=function(e){if("object"!=Vn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Un="ApiCreateAsyncAPI",Gn={mandatoryStar:"".concat(Un,"-mandatoryStar"),externalEndpointWarning:"".concat(Un,"-externalEndpointWarning"),alertTitle:"".concat(Un,"-alertTitle")},Bn=(0,a.Ay)(re)(function(e){var t=e.theme;return Fn(Fn(Fn({},"& .".concat(Gn.mandatoryStar),{color:t.palette.error.main,marginLeft:t.spacing(.1)}),"& .".concat(Gn.externalEndpointWarning),{marginTop:t.spacing(2),marginBottom:t.spacing(2)}),"& .".concat(Gn.alertTitle),{fontWeight:t.typography.fontWeightMedium,marginTop:-2})});function _n(e){var t,r=Wn((0,n.useState)(0),2),a=r[0],o=r[1],c=(0,i.zy)().state||{},s=c.data,u=c.settings,p=c.multiGateway,d=e.history,f=e.multiGateway,w=(0,l.Jy)().data;w||(w=u),f||(f=p);var M=Wn((0,n.useState)(!0),2),x=M[0],j=M[1],D=Wn((0,n.useState)(!0),2),T=D[0],R=D[1],L=Wn((0,n.useState)(!0),2),W=L[0],F=L[1],U=(0,A.A)(),G=Wn((0,n.useReducer)(function(e,t){var r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"version":case"endpoint":case"gatewayVendor":case"asyncTransportProtocols":case"protocol":case"context":case"policies":case"isFormValid":case"externalEndpoint":return Ln(Ln({},e),{},Fn({},r,n));case"inputType":return Ln(Ln({},e),{},Fn(Fn({},r,n),"inputValue","url"===n?"":null));case"preSetAPI":return Ln(Ln({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context,endpoint:n.endpoints&&n.endpoints[0],gatewayVendor:n.gatewayVendor,asyncTransportProtocols:n.asyncTransportProtocols});default:return e}},{type:"ApiCreateAsyncAPI",inputType:"url",inputValue:"",formValidity:!1,policies:["AsyncUnlimited"],gatewayType:f&&(f.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=f[0])||void 0===t?void 0:t.value)}),2),B=G[0],_=G[1];s&&0===a&&"DesignAssistant"===s.source&&(o(1),_({action:"preSetAPI",value:s}),_({action:"protocol",value:s.protocol}),_({action:"endpoint",value:s.endpoint}),_({action:"inputType",value:"file"}),_({action:"inputValue",value:s.file}));var q={WebSocket:"WS",SSE:"SSE",WebSub:"WEBSUB",Other:"ASYNC"};function z(e){return!!e&&!xn().string().uri().empty().validate(e).error}function $(e){_({action:"isFormValid",value:e})}var Q=Wn((0,n.useState)(),2),J=Q[0],K=Q[1];return n.createElement(Bn,{title:n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.heading",defaultMessage:[{type:0,value:"Create an API using an AsyncAPI definition."}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing AsyncAPI definition file or URL."}]})))},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:a},n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.wizard.one",defaultMessage:[{type:0,value:"Provide AsyncAPI"}]}))),n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,xs:12},0===a&&n.createElement(kn.A,{onValidate:$,apiInputs:B,inputsDispatcher:_}),1===a&&n.createElement(ee,{onValidate:$,onChange:function(e){var t=e.target,r=t.name,n=t.value;_({action:r,value:n})},api:B,isAPIProduct:!1,hideEndpoint:x,endpointPlaceholderText:"Streaming Provider",appendChildrenBeforeEndpoint:!0,multiGateway:f,settings:w},n.createElement(v.Ay,{container:!0,spacing:2},"solace"===B.gatewayVendor&&0!==B.asyncTransportProtocols.length&&n.createElement(n.Fragment,null,n.createElement(v.Ay,{item:!0,xs:12,md:6,lg:3},n.createElement(m.A,{component:"p",variant:"subtitle2"},n.createElement(g.A,{id:"Apis.Details.NewOverview.MetaData.solace.transports",defaultMessage:[{type:0,value:"Available Protocols"}]}))),n.createElement(v.Ay,{item:!0,xs:12,md:6,lg:9},B.asyncTransportProtocols.map(function(e){return n.createElement(V.A,{"data-testid":(0,jn.mf)(e)+"-label",key:e,label:(0,jn.mf)(e),style:{"font-size":13,height:20,marginRight:5},color:"primary"})})))),"wso2"===B.gatewayVendor&&n.createElement(O.A,{fullWidth:!0,select:!0,label:n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.asyncAPI.Components.SelectPolicies.business.plans",defaultMessage:[{type:0,value:"Protocol"}]}),n.createElement("sup",{className:Gn.mandatoryStar},"*")),value:B.protocol,name:"protocol",SelectProps:{multiple:!1,renderValue:function(e){return e}},margin:"normal",variant:"outlined",InputProps:{id:"itest-id-apipolicies-input"},onChange:function(e){var t=e.target,r=t.name,n=t.value;"WebSub"===n?(j(!0),R(!0),F(!0)):"Other"===n?(j(!0),R(!1),F(z(B.externalEndpoint))):(j(!1),R(!0),F(!0)),_({action:r,value:n})}},[{name:"ws",displayName:"WebSocket",description:"WebSocket API"},{name:"websub",displayName:"WebSub",description:"WebHook API based on WebSub specification"},{name:"sse",displayName:"SSE",description:"Server-Sent Events"},{name:"other",displayName:"Other",description:"Other Async APIs such as AMQP, MQTT etc."}].map(function(e){return n.createElement(k.A,{dense:!0,disableGutters:!1,id:e.name,key:e.name,value:e.displayName},n.createElement(De.A,{primary:e.displayName,secondary:e.description}))})),!T&&n.createElement(Tn,{classes:Gn,apiInputs:B,inputsDispatcher:_,isValidExternalEndpoint:W,setValidExternalEndpoint:F,validateEndpoint:z}))),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===a&&n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,null,n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&(s&&"DesignAssistant"===s.source?n.createElement(C.A,{onClick:function(){d.push("/apis")}},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.designAssistant.back",defaultMessage:[{type:0,value:"Back"}]})):n.createElement(C.A,{onClick:function(){return o(function(e){return e-1})}},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.back",defaultMessage:[{type:0,value:"Back"}]})))),n.createElement(v.Ay,{item:!0},0===a&&n.createElement(C.A,{"data-testid":"next-btn",onClick:function(){return o(function(e){return e+1})},variant:"contained",color:"primary",disabled:!B.isFormValid},n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===a&&n.createElement(C.A,{"data-testid":"asyncapi-create-btn",variant:"contained",color:"primary",disabled:!B.isFormValid||J||!W,onClick:function(){K(!0);var e=B.name,t=B.version,r=B.context,n=B.endpoint,a=B.policies,i=B.inputValue,o=B.inputType,l=B.protocol,c=B.gatewayVendor,s=B.externalEndpoint,u={name:e,version:t,context:r,policies:a,type:q[l],gatewayVendor:c};"solace"===c&&(u.type=q.WebSub),n&&(u.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:n},production_endpoints:{url:n}}),"ASYNC"===q[l]&&(u.advertiseInfo={advertised:!0,apiExternalProductionEndpoint:s,apiExternalSandboxEndpoint:s,originalDevPortalUrl:"",apiOwner:"admin",vendor:"WSO2"});var p=new N.A(u);("file"===o?p.importAsyncAPIByFile(i):"solaceEventApiProductId"===o?p.importAsyncApiFromSolaceEventApi(i):p.importAsyncAPIByUrl(i)).then(function(e){S.A.info(U.formatMessage({id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.created.success",defaultMessage:[{type:0,value:"API created successfully"}]})),d.push("/apis/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(U.formatMessage({id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)}).finally(function(){return K(!1)})}},"solace"===B.gatewayVendor?n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.createAndPublish",defaultMessage:[{type:0,value:"Create & Publish"}]}):n.createElement(g.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.create",defaultMessage:[{type:0,value:"Create"}]})," ",J&&n.createElement(I.A,{size:24})))))))}_n.propTypes={history:f().shape({push:f().func}).isRequired};var qn=r(6652),zn=r(569307);function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qn.apply(null,arguments)}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Yn={mandatoryStar:"".concat("ProvideAIOpenAPI","-mandatoryStar")},Xn=(0,a.Ay)("div")(function(e){var t,r,n,a=e.theme;return t={},r="& .".concat(Yn.mandatoryStar),n={color:a.palette.error.main},(r=function(e){var t=function(e){if("object"!=$n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$n(t)?t:t+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t});function Hn(e){var t=e.inputsDispatcher,r=e.onValidate,a=Jn((0,n.useState)(null),2),i=a[0],o=a[1],l=Jn((0,n.useState)(null),2),c=l[0],s=l[1],u=Jn((0,n.useState)(null),2),p=u[0],d=u[1],f=(0,A.A)();return(0,n.useEffect)(function(){d(null),t({action:"importingContent",value:null}),t({action:"inputValue",value:null}),t({action:"isFormValid",value:!1})},[c]),(0,n.useEffect)(function(){N.A.getLLMProviders().then(function(e){o(e.body)}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(f.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.LLM.Provider.fetch.error",defaultMessage:[{type:0,value:"Something went wrong while fetching LLM Providers"}]}))})},[]),n.createElement(Xn,null,i&&n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,xs:12,sx:{mb:2}},n.createElement(L.A,{component:"fieldset",sx:{width:"100%"}},n.createElement(zn.A,{component:"legend",sx:{width:"100%"}},n.createElement(He.A,{fullWidth:!0,id:"AI-providers-autocomplete",options:function(e){if(!e)return[];var t=[];return e.list.forEach(function(e){t.includes(e.name)||t.push(e.name)}),t}(i),noOptionsText:"No AI Service Provider defined",value:c,onChange:function(e,t){s(t)},renderOption:function(e,t){return n.createElement("li",e,t)},renderInput:function(e){return n.createElement(O.A,Qn({},e,{fullWidth:!0,label:0!==i.list.length?n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider",defaultMessage:[{type:0,value:"AI Service Provider"}]}),n.createElement("sup",{className:Yn.mandatoryStar},"*")):n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.empty",defaultMessage:[{type:0,value:"No AI Service Provider defined."}]}),placeholder:f.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.placeholder",defaultMessage:[{type:0,value:"Search AI Service Provider"}]}),helperText:n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.helper.text",defaultMessage:[{type:0,value:"Select AI Service Provider for the API"}]}),margin:"dense",variant:"outlined",id:"APIProvider"}))}})))),n.createElement(v.Ay,{item:!0,xs:12,sx:{mb:2}},n.createElement(L.A,{component:"fieldset",sx:{width:"100%"}},n.createElement(zn.A,{component:"legend",sx:{width:"100%"}},n.createElement(He.A,{fullWidth:!0,id:"AI-model-autocomplete",options:i.list.filter(function(e){return e.name===c}),noOptionsText:"No AI Service Provider selected",getOptionLabel:function(e){return e.apiVersion},value:p,onChange:function(e,n){d(n),n?N.A.getLLMProviderAPIDefinition(n.id).then(function(e){!function(e,n){var a=e.text;N.A.validateOpenAPIByInlineDefinition(a).then(function(e){if(!e.body.isValid)throw new Error("Invalid OpenAPI definition");t({action:"llmProviderId",value:n.id}),t({action:"inputValue",value:a}),t({action:"preSetAPI",value:e.body.info}),r(e.body.isValid)}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(f.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.LLMProvider.API.Definition.validation.failure.error",defaultMessage:[{type:0,value:"Error while validating the LLM Provider API Definition"}]})),t({action:"inputValue",value:null}),t({action:"isFormValid",value:!1}),r(!1)})}(e,n)}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(f.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.LLMProvider.API.Definition.fetch.error",defaultMessage:[{type:0,value:"Something went wrong while fetching LLM Provider API Definition"}]}))}):t({action:"isFormValid",value:!1})},renderOption:function(e,t){return n.createElement("li",e,t.apiVersion)},renderInput:function(e){return n.createElement(O.A,Qn({},e,{fullWidth:!0,label:0!==i.list.length?n.createElement(n.Fragment,null,n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model",defaultMessage:[{type:0,value:"API version"}]}),n.createElement("sup",{className:Yn.mandatoryStar},"*")):n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model.empty",defaultMessage:[{type:0,value:"No AI Service Provider selected."}]}),placeholder:f.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model.placeholder",defaultMessage:[{type:0,value:"Search API version"}]}),helperText:n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model.helper",defaultMessage:[{type:0,value:"Select API version for the API"}]}),margin:"dense",variant:"outlined",id:"APIModelVersion"}))}})))),n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center"},n.createElement(v.Ay,{item:!0},n.createElement(m.A,{variant:"caption",display:"block",gutterBottom:!0},n.createElement("sup",{style:{color:"red"}},"*")," ",n.createElement(g.A,{id:"Apis.Create.Components.DefaultAPIForm.mandatory.fields",defaultMessage:[{type:0,value:"Mandatory fields"}]}))))),!i&&n.createElement(v.Ay,{container:!0},n.createElement(v.Ay,{item:!0,xs:12,sx:{mb:2}},n.createElement(m.A,null,n.createElement(g.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.loading",defaultMessage:[{type:0,value:"Loading AI Service Providers..."}]})))))}function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ta(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach(function(t){aa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function aa(e,t,r){return(t=function(e){var t=function(e){if("object"!=Zn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ia(e,t){var r=t.action,n=t.value;switch(r){case"type":case"inputValue":case"name":case"displayName":case"version":case"endpoint":case"gatewayType":case"context":case"policies":case"llmProviderId":case"isFormValid":return na(na({},e),{},aa({},r,n));case"preSetAPI":return na(na({},e),{},{name:n.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:n.version,context:n.context,endpoint:n.endpoints&&n.endpoints[0]});default:return e}}function oa(e){var t,r=ea((0,n.useState)(0),2),a=r[0],i=r[1],o=e.history,c=e.multiGateway,s=(0,l.Jy)().data,u=ea((0,n.useReducer)(ia,{type:"ApiCreateAIAPI",inputValue:"",formValidity:!1,gatewayType:c&&(c.filter(function(e){return"wso2/synapse"===e.value}).length>0?"wso2/synapse":null===(t=c[0])||void 0===t?void 0:t.value)}),2),p=u[0],d=u[1],f=(0,A.A)();function w(e){d({action:"isFormValid",value:e})}var O=ea((0,n.useState)(),2),M=O[0],x=O[1];return n.createElement(re,{title:n.createElement(n.Fragment,null,n.createElement(m.A,{variant:"h5"},n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.heading",defaultMessage:[{type:0,value:"Create an API using an AI Service provider API definition."}]})),n.createElement(m.A,{variant:"caption"},n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing AI Service provider API definition."}]})))},n.createElement(y.A,{sx:{mb:2}},n.createElement(b.A,{alternativeLabel:!0,activeStep:a},n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.wizard.one",defaultMessage:[{type:0,value:"Provide AI Service provider API"}]}))),n.createElement(h.A,null,n.createElement(P.A,null,n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),n.createElement(v.Ay,{container:!0,spacing:2},n.createElement(v.Ay,{item:!0,xs:12},0===a&&n.createElement(Hn,{onValidate:w,inputsDispatcher:d}),1===a&&n.createElement(ee,{onValidate:w,onChange:function(e){var t=e.target,r=t.name,n=t.value;d({action:r,value:n})},multiGateway:c,api:p,isAPIProduct:!1,hideEndpoint:!0,settings:s})),n.createElement(v.Ay,{item:!0,xs:12},n.createElement(v.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},n.createElement(v.Ay,{item:!0},0===a&&n.createElement(E.N_,{to:"/apis/"},n.createElement(C.A,null,n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&n.createElement(C.A,{onClick:function(){return i(function(e){return e-1})}},n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.back",defaultMessage:[{type:0,value:"Back"}]}))),n.createElement(v.Ay,{item:!0},0===a&&n.createElement(C.A,{onClick:function(){return i(function(e){return e+1})},variant:"contained",color:"primary",disabled:!p.isFormValid,id:"ai-api-create-next-btn"},n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===a&&n.createElement(C.A,{variant:"contained",color:"primary",disabled:!p.isFormValid||M,onClick:function(){x(!0);var e=p.name,t=p.version,r=p.context,n=p.endpoint,a=p.gatewayType,i=p.displayName,l=p.policies,c=void 0===l?["Unlimited"]:l,s=p.inputValue,u={name:e,displayName:i,version:t,context:r,gatewayType:a,policies:c,subtypeConfiguration:{subtype:"AIAPI",configuration:{llmProviderId:p.llmProviderId}},securityScheme:[qn.pg],egress:!0};n&&(u.endpointConfig={endpoint_type:"http",production_endpoints:{url:n}}),new N.A(u).importOpenAPIByInlineDefinition(s).then(function(e){S.A.info(f.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.success",defaultMessage:[{type:0,value:"API created successfully"}]})),o.push("/apis/".concat(e.id,"/overview"))}).catch(function(e){e.response?S.A.error(e.response.body.description):S.A.error(f.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]}))}).finally(function(){return x(!1)})},id:"ai-api-create-btn"},n.createElement(g.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.create",defaultMessage:[{type:0,value:"Create"}]})," ",M&&n.createElement(I.A,{size:24})))))))}function la(e){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},la(e)}function ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(r),!0).forEach(function(t){ma(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ca(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(e,t)||pa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(e,t){if(e){if("string"==typeof e)return da(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?da(e,t):void 0}}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fa.apply(null,arguments)}function ma(e,t,r){return(t=function(e){var t=function(e){if("object"!=la(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=la(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==la(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Hn.defaultProps={onValidate:function(){}},Hn.propTypes={inputsDispatcher:f().func.isRequired,onValidate:f().func},oa.propTypes={history:f().shape({push:f().func}).isRequired,multiGateway:f().string.isRequired};var ya={content:"".concat("APICreateRoutes","-content")},va=(0,a.Ay)("div")(ma({},"&.".concat(ya.content),{flexGrow:1})),Aa={"wso2/synapse":{value:"wso2/synapse",name:"Universal Gateway",description:"API gateway embedded in APIM runtime.",isNew:!1},"wso2/apk":{value:"wso2/apk",name:"Kubernetes Gateway",description:"API gateway running on Kubernetes.",isNew:!1},AWS:{value:"AWS",name:"AWS Gateway",description:"API gateway offered by AWS cloud.",isNew:!1},Azure:{value:"Azure",name:"Azure Gateway",description:"API gateway offered by Azure cloud.",isNew:!1}},ga=function(e,t){return function(r){return n.createElement(e,fa({},r,t))}};const ba=function(){var e=(0,l.Jy)(),t=e.data,r=e.isLoading,a=ua((0,n.useState)(null),2),d=a[0],f=a[1],m=ua((0,n.useState)(null),2),y=m[0],v=m[1];return(0,n.useEffect)(function(){if(!r){f(t.gatewayFeatureCatalog.apiTypes);var e=t.gatewayTypes,n=t.environment,a=n?n.filter(function(e){return"READ_ONLY"!==(null==e?void 0:e.mode)}):[],i=(l=new Set(a.map(function(e){return e.gatewayType})),function(e){if(Array.isArray(e))return da(e)}(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||pa(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter(function(t){return e.includes(t)}).map(function(e){return"Regular"===e?"wso2/synapse":"APK"===e?"wso2/apk":e});v(i);var o={};i.forEach(function(e){if(!Aa[e]){var t={value:e,name:e+" Gateway",description:"Custom API Gateway for "+e,isNew:!1};o[e]=t}}),Aa=sa(sa({},Aa),o)}var l},[r]),r?n.createElement(c.ke,{per:80,message:"Loading app settings ..."}):n.createElement(va,{className:ya.content},n.createElement(i.dO,null,n.createElement(i.qh,{exact:!0,path:"/apis/create",component:u.A}),n.createElement(i.qh,{path:"/apis/create/rest",component:ga(Ir,{multiGateway:null==d?void 0:d.rest.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/api-products/create",component:Wr}),n.createElement(i.qh,{path:"/apis/create/graphQL",component:ga(vn,{multiGateway:null==d?void 0:d.graphql.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/apis/create/openapi",component:ga(zr,{multiGateway:null==d?void 0:d.rest.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/apis/create/wsdl",component:ga(cn,{multiGateway:null==d?void 0:d.soap.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/apis/create/ws",component:ga(An,{multiGateway:null==d?void 0:d.ws.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/apis/create/streamingapi/:apiType",component:ga(On,{multiGateway:null==d?void 0:d.ws.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/apis/create/asyncapi",component:ga(_n,{multiGateway:null==d?void 0:d.ws.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{path:"/apis/create/ai-api",component:ga(oa,{multiGateway:null==d?void 0:d.ai.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})}),n.createElement(i.qh,{exact:!0,path:"/mcp-servers/create",render:function(e){return n.createElement(s.A,null,n.createElement(p.A,e))}}),n.createElement(i.qh,{path:"/mcp-servers/create/import-api-definition",render:function(e){return n.createElement(s.A,null,ga(Xe,{multiGateway:null==d?void 0:d.ws.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})(e))}}),n.createElement(i.qh,{path:"/mcp-servers/create/mcp-from-existing-api",render:function(e){return n.createElement(s.A,null,ga(Ot,{multiGateway:null==d?void 0:d.ws.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})(e))}}),n.createElement(i.qh,{path:"/mcp-servers/create/mcp-proxy-from-endpoint",render:function(e){return n.createElement(s.A,null,ga(nr,{multiGateway:null==d?void 0:d.ws.filter(function(e){return y.includes(e)}).map(function(e){return Aa[e]})})(e))}}),n.createElement(i.qh,{component:o.A})))}}}]);
//# sourceMappingURL=APICreateRoutes.a752935ce1d7e01455e1.bundle.js.map